"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[3097,1518,4350,931,4158],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=l(n),c=o,g=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return n?a.createElement(g,r(r({ref:t},d),{},{components:n})):a.createElement(g,r({ref:t},d))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:o,r[1]=p;for(var l=2;l<i;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},64793:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>v,frontMatter:()=>l,metadata:()=>m,toc:()=>c});var a=n(83117),o=(n(67294),n(3905)),i=n(76634),r=n(81322),p=n(61770),s=n(87386);const l={title:"Migrate from 4.0.6+ to 4.1.8",displayed_sidebar:"devDocsSidebar",description:"Learn how you can migrate your Strapi application from 4.0.6+ to 4.1.8.",canonicalUrl:"https://docs.strapi.io/developer-docs/latest/update-migration-guides/migration-guides/v4/migration-guide-4.0.x-to-4.1.8.html"},d="v4.0.6+ to v4.1.8 migration guide",m={unversionedId:"dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8",id:"dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8",title:"Migrate from 4.0.6+ to 4.1.8",description:"Learn how you can migrate your Strapi application from 4.0.6+ to 4.1.8.",source:"@site/docs/dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8.md",sourceDirName:"dev-docs/migration/v4",slug:"/dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8",permalink:"/aberabook/dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/migration/v4/migration-guide-4.0.6-to-4.1.8.md",tags:[],version:"current",frontMatter:{title:"Migrate from 4.0.6+ to 4.1.8",displayed_sidebar:"devDocsSidebar",description:"Learn how you can migrate your Strapi application from 4.0.6+ to 4.1.8.",canonicalUrl:"https://docs.strapi.io/developer-docs/latest/update-migration-guides/migration-guides/v4/migration-guide-4.0.x-to-4.1.8.html"},sidebar:"devDocsSidebar"},u={},c=[{value:"Upgrading the application dependencies to 4.1.8",id:"upgrading-the-application-dependencies-to-418",level:2},{value:"Fixing the breaking changes",id:"fixing-the-breaking-changes",level:2},{value:"Setting secrets for non-development environments",id:"setting-secrets-for-non-development-environments",level:2},{value:"Rebuild the application",id:"rebuild-the-application",level:2},{value:"Restart the application",id:"restart-the-application",level:2}],g={toc:c};function v(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"v406-to-v418-migration-guide"},"v4.0.6+ to v4.1.8 migration guide"),(0,o.kt)("p",null,"The Strapi v4.0.6+ to v4.1.8 migration guide upgrades versions of v4.0.6 and above to v4.1.8. The minimum configuration for ",(0,o.kt)("inlineCode",{parentName:"p"},"config/admin")," now includes the API token ",(0,o.kt)("inlineCode",{parentName:"p"},"API_TOKEN_SALT"),". Strapi no longer populates default values for the admin JWT in ",(0,o.kt)("inlineCode",{parentName:"p"},"config/admin"),". Initial values are generated and stored in the .env file during project creation. Strapi no longer passes secrets to non-development environments, requiring users to set the secrets purposefully. The migration to v4.1.8 consists of 4 steps:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Upgrading the application dependencies"),(0,o.kt)("li",{parentName:"ul"},"Fixing the breaking changes"),(0,o.kt)("li",{parentName:"ul"},"Setting secrets for non-development environments"),(0,o.kt)("li",{parentName:"ul"},"Reinitializing the application")),(0,o.kt)(i.default,{components:n.components,mdxType:"PluginsCaution"}),(0,o.kt)("h2",{id:"upgrading-the-application-dependencies-to-418"},"Upgrading the application dependencies to 4.1.8"),(0,o.kt)("admonition",{type:"prerequisites"},(0,o.kt)("p",{parentName:"admonition"},"Stop the server before starting the upgrade.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Upgrade all of the Strapi packages in the ",(0,o.kt)("inlineCode",{parentName:"li"},"package.json")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"4.1.8"),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="path: ./package.json"',title:'"path:','./package.json"':!0},'\n{\n  // ...\n  "dependencies": {\n    "@strapi/strapi": "4.1.8",\n    "@strapi/plugin-users-permissions": "4.1.8",\n    "@strapi/plugin-i18n": "4.1.8",\n    "better-sqlite3": "7.4.6"\n    // ...\n  }\n}\n\n')),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Save the edited ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," file.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)(s.default,{components:n.components,mdxType:"InstallCommand"}))),(0,o.kt)("h2",{id:"fixing-the-breaking-changes"},"Fixing the breaking changes"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Modify the ",(0,o.kt)("inlineCode",{parentName:"li"},"config/admin")," file. Strapi, by default, creates the environmental variable ",(0,o.kt)("inlineCode",{parentName:"li"},"API_TOKEN_SALT")," and populates a unique value, stored in ",(0,o.kt)("inlineCode",{parentName:"li"},"/.env")," at project creation. In order to update ",(0,o.kt)("inlineCode",{parentName:"li"},"config/admin"),":")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"add the apiToken object,"),(0,o.kt)("li",{parentName:"ul"},"remove the comma and default value from the ",(0,o.kt)("inlineCode",{parentName:"li"},"ADMIN_JWT_SECRET")," parenthetical.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="path: config/admin.js"',title:'"path:','config/admin.js"':!0},"\nmodule.exports = ({ env }) => ({\n  auth: {\n    secret: env('ADMIN_JWT_SECRET'),\n  },\n  apiToken: {\n    salt: env('API_TOKEN_SALT'),\n  },\n});\n\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Configure",(0,o.kt)("inlineCode",{parentName:"li"},"JWT_SECRET"),". ",(0,o.kt)("inlineCode",{parentName:"li"},"JWT_SECRET")," is used by the Users and Permissions plugin, and populated in ",(0,o.kt)("inlineCode",{parentName:"li"},"/.env"),". The property should be stored in ",(0,o.kt)("inlineCode",{parentName:"li"},"config/plugins.js")," (or ",(0,o.kt)("inlineCode",{parentName:"li"},"config/plugins.ts")," for a TypeScript project). The ",(0,o.kt)("inlineCode",{parentName:"li"},"plugins")," file is not created by default in a Strapi application. If the file does not exist, users should create the file and add the following code snippet.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="path: ./config/plugins.js"',title:'"path:','./config/plugins.js"':!0},"\nmodule.exports = ({ env }) => ({\n  // ...\n  'users-permissions': {\n    config: {\n    jwtSecret: env('JWT_SECRET')\n  },\n  },\n  // ...\n});\n\n")),(0,o.kt)("h2",{id:"setting-secrets-for-non-development-environments"},"Setting secrets for non-development environments"),(0,o.kt)("p",null,"Users are required to set secrets for each unique environment, such as a production environment deployment on a platform. Strapi no longer passes the following secrets to non-development environments:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"APP_KEYS"),(0,o.kt)("li",{parentName:"ul"},"JWT_SECRET"),(0,o.kt)("li",{parentName:"ul"},"API_TOKEN_SALT"),(0,o.kt)("li",{parentName:"ul"},"ADMIN_JWT_SECRET")),(0,o.kt)("p",null,"There are multiple methods to generate secrets, for example running ",(0,o.kt)("inlineCode",{parentName:"p"},"openssl rand -base64 32")," in the terminal (Mac and Linux OS). Generating unique secrets for each environment is recommended for increased security."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("a",{parentName:"p",href:"/dev-docs/deployment/hosting-guides"},"Hosting Provider Guides")," are being updated to reflect these changes. Community contributions updating the hosting guides are encouraged.")),(0,o.kt)("h2",{id:"rebuild-the-application"},"Rebuild the application"),(0,o.kt)(r.default,{components:n.components,mdxType:"BuildCommand"}),(0,o.kt)("h2",{id:"restart-the-application"},"Restart the application"),(0,o.kt)(p.default,{components:n.components,mdxType:"DevelopCommand"}))}v.isMDXComponent=!0},81322:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var a=n(83117),o=(n(67294),n(3905));const i={},r=void 0,p={unversionedId:"snippets/build-npm-yarn",id:"snippets/build-npm-yarn",title:"build-npm-yarn",description:"Run the following command in your project root directory to rebuild Strapi's admin panel:",source:"@site/docs/snippets/build-npm-yarn.md",sourceDirName:"snippets",slug:"/snippets/build-npm-yarn",permalink:"/aberabook/snippets/build-npm-yarn",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/snippets/build-npm-yarn.md",tags:[],version:"current",frontMatter:{}},s={},l=[],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",t)},m=d("Tabs"),u=d("TabItem"),c={toc:l};function g(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Run the following command in your project root directory to rebuild Strapi's admin panel:"),(0,o.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,o.kt)(u,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn build\n"))),(0,o.kt)(u,{value:"npm",label:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")))))}g.isMDXComponent=!0},61770:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var a=n(83117),o=(n(67294),n(3905));const i={},r=void 0,p={unversionedId:"snippets/develop-npm-yarn",id:"snippets/develop-npm-yarn",title:"develop-npm-yarn",description:"Run the following command in your project root directory to restart the application:",source:"@site/docs/snippets/develop-npm-yarn.md",sourceDirName:"snippets",slug:"/snippets/develop-npm-yarn",permalink:"/aberabook/snippets/develop-npm-yarn",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/snippets/develop-npm-yarn.md",tags:[],version:"current",frontMatter:{}},s={},l=[],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",t)},m=d("Tabs"),u=d("TabItem"),c={toc:l};function g(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Run the following command in your project root directory to restart the application:"),(0,o.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,o.kt)(u,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn develop\n"))),(0,o.kt)(u,{value:"npm",label:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run develop\n")))))}g.isMDXComponent=!0},87386:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var a=n(83117),o=(n(67294),n(3905));const i={},r=void 0,p={unversionedId:"snippets/install-npm-yarn",id:"snippets/install-npm-yarn",title:"install-npm-yarn",description:"Install the upgraded version:",source:"@site/docs/snippets/install-npm-yarn.md",sourceDirName:"snippets",slug:"/snippets/install-npm-yarn",permalink:"/aberabook/snippets/install-npm-yarn",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/snippets/install-npm-yarn.md",tags:[],version:"current",frontMatter:{}},s={},l=[],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",t)},m=d("Tabs"),u=d("TabItem"),c={toc:l};function g(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Install the upgraded version:"),(0,o.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,o.kt)(u,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn\n"))),(0,o.kt)(u,{value:"npm",label:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If the operation doesn't work, try removing your ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn.lock")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"package-lock.json"),". If that doesn't help, remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," folder as well and try again.")))}g.isMDXComponent=!0},76634:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var a=n(83117),o=(n(67294),n(3905));const i={},r=void 0,p={unversionedId:"snippets/migrate-plugins-extension-caution",id:"snippets/migrate-plugins-extension-caution",title:"migrate-plugins-extension-caution",description:"Plugins extension that create custom code or modify existing code, will need to be updated and compared to the changes in the repository. Not updating the plugin extensions could break the application.",source:"@site/docs/snippets/migrate-plugins-extension-caution.md",sourceDirName:"snippets",slug:"/snippets/migrate-plugins-extension-caution",permalink:"/aberabook/snippets/migrate-plugins-extension-caution",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/snippets/migrate-plugins-extension-caution.md",tags:[],version:"current",frontMatter:{}},s={},l=[],d={toc:l};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"}," ",(0,o.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/plugins/users-permissions"},"Plugins extension")," that create custom code or modify existing code, will need to be updated and compared to the changes in the repository. Not updating the plugin extensions could break the application.")))}m.isMDXComponent=!0}}]);