"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[5769],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>v});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(t),v=r,f=p["".concat(l,".").concat(v)]||p[v]||d[v]||i;return t?a.createElement(f,s(s({ref:n},u),{},{components:t})):a.createElement(f,s({ref:n},u))}));function v(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=p;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},56893:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>f,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=t(83117),r=(t(67294),t(3905));const i={title:"Access and cast environment variables",displayed_sidebar:"devDocsConfigSidebar"},s="How to access and cast environment variables",o={unversionedId:"dev-docs/configurations/guides/access-cast-environment-variables",id:"dev-docs/configurations/guides/access-cast-environment-variables",title:"Access and cast environment variables",description:"In most use cases there will be different configurations between environments (e.g. database credentials).",source:"@site/docs/dev-docs/configurations/guides/access-cast-environment-variables.md",sourceDirName:"dev-docs/configurations/guides",slug:"/dev-docs/configurations/guides/access-cast-environment-variables",permalink:"/aberabook/dev-docs/configurations/guides/access-cast-environment-variables",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/configurations/guides/access-cast-environment-variables.md",tags:[],version:"current",frontMatter:{title:"Access and cast environment variables",displayed_sidebar:"devDocsConfigSidebar"},sidebar:"devDocsConfigSidebar",previous:{title:"Public assets",permalink:"/aberabook/dev-docs/configurations/public-assets"},next:{title:"Access configuration values from the code",permalink:"/aberabook/dev-docs/configurations/guides/access-configuration-values"}},l={},c=[{value:"Accessing environment variables",id:"accessing-environment-variables",level:2},{value:"Casting environment variables",id:"casting-environment-variables",level:2}],u=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",n)},d=u("Tabs"),p=u("TabItem"),v={toc:c};function f(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-access-and-cast-environment-variables"},"How to access and cast environment variables"),(0,r.kt)("p",null,"In most use cases there will be different configurations between environments (e.g. database credentials)."),(0,r.kt)("p",null,"Instead of writing those credentials into configuration files, variables can be defined in a ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file at the root of the application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# path: .env\n\nDATABASE_PASSWORD=acme\n")),(0,r.kt)("p",null,"To customize the path of the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file to load, set an environment variable called ",(0,r.kt)("inlineCode",{parentName:"p"},"ENV_PATH")," before starting the application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"ENV_PATH=/absolute/path/to/.env npm run start\n")),(0,r.kt)("h2",{id:"accessing-environment-variables"},"Accessing environment variables"),(0,r.kt)("p",null,"Variables defined in the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file are accessible using ",(0,r.kt)("inlineCode",{parentName:"p"},"process.env.{variableName}")," anywhere in configuration and application files."),(0,r.kt)("p",null,"In configuration files, a ",(0,r.kt)("inlineCode",{parentName:"p"},"env()")," utility allows defining defaults and ",(0,r.kt)("a",{parentName:"p",href:"#casting-environment-variables"},"casting values"),":"),(0,r.kt)(d,{groupId:"js-ts",mdxType:"Tabs"},(0,r.kt)(p,{value:"javascript",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./config/database.js"',title:'"./config/database.js"'},"\nmodule.exports = ({ env }) => ({\n  connections: {\n    default: {\n      settings: {\n        password: env('DATABASE_PASSWORD'),\n      },\n    },\n  },\n});\n"))),(0,r.kt)(p,{value:"typescript",label:"TypeScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./config/database.ts"',title:'"./config/database.ts"'},"\nexport default ({ env }) => ({\n  connections: {\n    default: {\n      settings: {\n        password: env('DATABASE_PASSWORD'),\n      },\n    },\n  },\n});\n")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The syntax ",(0,r.kt)("inlineCode",{parentName:"p"},"property-name: env('VAR', 'default-value')")," uses the value stored in the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file. If there is no specified value in the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file the default value is used.")),(0,r.kt)("h2",{id:"casting-environment-variables"},"Casting environment variables"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"env()")," utility can be used to cast environment variables to different types:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Returns the env if defined without casting it\nenv('VAR', 'default');\n\n// Cast to integer (using parseInt)\nenv.int('VAR', 0);\n\n// Cast to float (using parseFloat)\nenv.float('VAR', 3.14);\n\n// Cast to boolean (check if the value is equal to 'true')\nenv.bool('VAR', true);\n\n// Cast to JS object (using JSON.parse)\nenv.json('VAR', { key: 'value' });\n\n// Cast to array (syntax: ENV_VAR=[value1, value2, value3] | ENV_VAR=[\"value1\", \"value2\", \"value3\"])\nenv.array('VAR', [1, 2, 3]);\n\n// Cast to date (using new Date(value))\nenv.date('VAR', new Date());\n\n// Returns the env matching oneOf union types\nenv.oneOf('UPLOAD_PROVIDER', ['local', 'aws'], 'local')\n")))}f.isMDXComponent=!0}}]);