"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[3147],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),u=r,k=c["".concat(s,".").concat(u)]||c[u]||m[u]||i;return a?n.createElement(k,o(o({ref:t},d),{},{components:a})):n.createElement(k,o({ref:t},d))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},59529:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>f,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(83117),r=(a(67294),a(3905));const i={title:"Data transfer",description:"Transfer data using the Strapi CLI",displayed_sidebar:"devDocsSidebar",canonicalUrl:"https://docs.strapi.io/dev-docs/data-management/transfer.html"},o="Data transfer",l={unversionedId:"dev-docs/data-management/transfer",id:"dev-docs/data-management/transfer",title:"Data transfer",description:"Transfer data using the Strapi CLI",source:"@site/docs/dev-docs/data-management/transfer.md",sourceDirName:"dev-docs/data-management",slug:"/dev-docs/data-management/transfer",permalink:"/aberabook/dev-docs/data-management/transfer",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/data-management/transfer.md",tags:[],version:"current",frontMatter:{title:"Data transfer",description:"Transfer data using the Strapi CLI",displayed_sidebar:"devDocsSidebar",canonicalUrl:"https://docs.strapi.io/dev-docs/data-management/transfer.html"},sidebar:"devDocsSidebar",previous:{title:"Data import",permalink:"/aberabook/dev-docs/data-management/import"},next:{title:"Database migrations",permalink:"/aberabook/dev-docs/database-migrations"}},s={},p=[{value:"Generate a transfer token",id:"generate-a-transfer-token",level:2},{value:"Setup and run the data transfer",id:"setup-and-run-the-data-transfer",level:2},{value:"Bypass all <code>transfer</code> command line prompts",id:"bypass-all-transfer-command-line-prompts",level:2},{value:"Example: bypass the <code>transfer</code> command line prompts with <code>--force</code>",id:"example-bypass-the-transfer-command-line-prompts-with---force",level:3},{value:"Include only specified data types during transfer",id:"include-only-specified-data-types-during-transfer",level:2},{value:"Example: only transfer files",id:"example-only-transfer-files",level:3},{value:"Exclude data types during transfer",id:"exclude-data-types-during-transfer",level:2},{value:"Example: exclude files from transfer",id:"example-exclude-files-from-transfer",level:3},{value:"Manage data transfer with environment variables",id:"manage-data-transfer-with-environment-variables",level:2},{value:"Test the transfer command locally",id:"test-the-transfer-command-locally",level:2},{value:"Create and clone a new Strapi project",id:"create-and-clone-a-new-strapi-project",level:3},{value:"Add data to the first Strapi instance",id:"add-data-to-the-first-strapi-instance",level:3},{value:"Create a transfer token",id:"create-a-transfer-token",level:3},{value:"Transfer your data",id:"transfer-your-data",level:3}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},m=d("Tabs"),c=d("TabItem"),u=d("FeedbackPlaceholder"),k={toc:p};function f(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"data-transfer"},"Data transfer"),(0,r.kt)("p",null,":::strapi v4.10.0+ feature\nData export is available in v4.10.0 and newer versions of Strapi. See the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/update-version"},"Updates and Migration documentation")," to upgrade your application.\n:::"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," command streams your data from one Strapi instance to another Strapi instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," command uses strict schema matching, meaning your two Strapi instances need to be exact copies of each other except for the contained data. The default ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," command transfers your content (entities and relations), files (assets), project configuration, and schemas. The command allows you to transfer data:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"from a local Strapi instance to a remote Strapi instance"),(0,r.kt)("li",{parentName:"ul"},"from a remote Strapi instance to a local Strapi instance")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"If you are using an SQLite database in the destination instance other database connections will be blocked while the ",(0,r.kt)("inlineCode",{parentName:"li"},"transfer")," operation is running."),(0,r.kt)("li",{parentName:"ul"},"Admin users and API tokens are not transferred."),(0,r.kt)("li",{parentName:"ul"},"If you use websockets or Socket.io in your projects, the transfer command will fail. You will need to ",(0,r.kt)("strong",{parentName:"li"},"temporarily disable websockets or Socket.io")," or ensure that your websocket server is running on a different port than the Strapi server, or a on a specific route within Strapi to use the transfer command."))),(0,r.kt)("p",null,"The CLI command consists of the following arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--to")),(0,r.kt)("td",{parentName:"tr",align:null},"Full URL of the ",(0,r.kt)("inlineCode",{parentName:"td"},"/admin")," endpoint on the destination Strapi instance",(0,r.kt)("br",null),"(e.g. ",(0,r.kt)("inlineCode",{parentName:"td"},"--to https://my-beautiful-strapi-website/admin"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u2011\u2011to\u2011token")),(0,r.kt)("td",{parentName:"tr",align:null},"Transfer token from the Strapi destination instance.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--from")),(0,r.kt)("td",{parentName:"tr",align:null},"Full URL of the ",(0,r.kt)("inlineCode",{parentName:"td"},"/admin")," endpoint of the remote Strapi instance to pull data from (e.g., ",(0,r.kt)("inlineCode",{parentName:"td"},"--from https://my-beautiful-strapi-website/admin"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"\u2011\u2011from\u2011token")),(0,r.kt)("td",{parentName:"tr",align:null},"Transfer token from the Strapi source instance.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--force")),(0,r.kt)("td",{parentName:"tr",align:null},'Automatically answer "yes" to all prompts, including potentially destructive requests, and run non-interactively.')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--exclude")),(0,r.kt)("td",{parentName:"tr",align:null},"Exclude data using comma-separated data types. The available types are: ",(0,r.kt)("inlineCode",{parentName:"td"},"content"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"files"),", and ",(0,r.kt)("inlineCode",{parentName:"td"},"config"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--only")),(0,r.kt)("td",{parentName:"tr",align:null},"Include only these data. The available types are: ",(0,r.kt)("inlineCode",{parentName:"td"},"content"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"files"),", and ",(0,r.kt)("inlineCode",{parentName:"td"},"config"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--throttle")),(0,r.kt)("td",{parentName:"tr",align:null},'Time in milliseconds to inject an artificial delay between the "chunks" during a transfer.')))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Either ",(0,r.kt)("inlineCode",{parentName:"p"},"--to")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"--from")," is required.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Data transfers are authorized by transfer tokens, which are ",(0,r.kt)("a",{parentName:"p",href:"/user-docs/settings/transfer-tokens"},"managed from the admin panel"),". From the admin panel, you can manage role-based permissions to tokens including ",(0,r.kt)("inlineCode",{parentName:"p"},"view"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"create"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"read"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"regenerate")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"delete"),".")),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"When using nginx and a server that proxies requests into a localhost, issues might occur. To prevent them, ensure all the headers are forwarded correctly by changing the configuration file in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available/yourdomain")," as follows:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},'server {\n    listen 80;\n    server_name <yourdomain>;\n    location / {\n        proxy_pass http://localhost:1337;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "Upgrade";\n        proxy_set_header Host $host;\n        include proxy_params;\n    }\n}\n'))),(0,r.kt)("h2",{id:"generate-a-transfer-token"},"Generate a transfer token"),(0,r.kt)("admonition",{type:"prerequisites"},(0,r.kt)("p",{parentName:"admonition"},"A salt transfer token should be defined in the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/configurations/admin-panel"},"admin panel configuration")," file.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," command requires a transfer token issued by the destination instance. To generate a transfer token in the admin panel use the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/user-docs/settings/transfer-tokens"},"User Guide"),"."),(0,r.kt)("h2",{id:"setup-and-run-the-data-transfer"},"Setup and run the data transfer"),(0,r.kt)("p",null,"Initiating a data transfer depends on whether you want to push data to a remote instance or to pull data from the remote:"),(0,r.kt)(m,{mdxType:"Tabs"},(0,r.kt)(c,{value:"push",label:"Push data to remote",mdxType:"TabItem"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the Strapi server for the destination instance.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In a new terminal window, navigate to the root directory of the source instance.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run the following minimal command to initiate the transfer, ensuring ",(0,r.kt)("inlineCode",{parentName:"p"},"destinationURL")," is the full URL to the admin panel (i.e., the URL includes the ",(0,r.kt)("inlineCode",{parentName:"p"},"/admin")," part):"),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --to destinationURL\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --to destinationURL\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add the transfer token when prompted to do so.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Answer ",(0,r.kt)("strong",{parentName:"p"},"Yes")," or ",(0,r.kt)("strong",{parentName:"p"},"No"),' to the CLI prompt: "The transfer will delete all of the remote Strapi assets and its database. Are you sure you want to proceed?"')))),(0,r.kt)(c,{value:"pull",label:"Pull data from remote",mdxType:"TabItem"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the Strapi server for the source instance.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In a new terminal window, navigate to the root directory of the destination instance.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run the following minimal command to initiate the transfer, ensuring ",(0,r.kt)("inlineCode",{parentName:"p"},"remoteURL")," is the full URL to the admin panel (i.e., the URL includes the ",(0,r.kt)("inlineCode",{parentName:"p"},"/admin")," part):"),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --from remoteURL\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --from remoteURL\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add the transfer token when prompted to do so.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Answer ",(0,r.kt)("strong",{parentName:"p"},"Yes")," or ",(0,r.kt)("strong",{parentName:"p"},"No"),' to the CLI prompt: "The transfer will delete all of the local Strapi assets and its database. Are you sure you want to proceed?".'))))),(0,r.kt)("h2",{id:"bypass-all-transfer-command-line-prompts"},"Bypass all ",(0,r.kt)("inlineCode",{parentName:"h2"},"transfer")," command line prompts"),(0,r.kt)("p",null,"When using the ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," command, you are required to confirm that the transfer will delete the existing database contents. The ",(0,r.kt)("inlineCode",{parentName:"p"},"--force")," flag allows you to bypass this prompt. This option is useful for implementing ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," programmatically. You must pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"to-token")," option with the transfer token if you use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--force")," option."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--force")," option bypasses all warnings about content deletion.")),(0,r.kt)("h3",{id:"example-bypass-the-transfer-command-line-prompts-with---force"},"Example: bypass the ",(0,r.kt)("inlineCode",{parentName:"h3"},"transfer")," command line prompts with ",(0,r.kt)("inlineCode",{parentName:"h3"},"--force")),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --to https://example.com/admin --to-token my-transfer-token --force\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --to https://example.com/admin --to-token my-transfer-token --force\n")))),(0,r.kt)("h2",{id:"include-only-specified-data-types-during-transfer"},"Include only specified data types during transfer"),(0,r.kt)("p",null,"The default ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," command transfers your content (entities and relations), files (assets), project configuration, and schemas. The ",(0,r.kt)("inlineCode",{parentName:"p"},"--only")," option allows you to transfer only the listed items by passing a comma-separated string with no spaces between the types. The available values are ",(0,r.kt)("inlineCode",{parentName:"p"},"content"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"files"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"config"),". Schemas are always transferred, as schema matching is used for ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer"),"."),(0,r.kt)("h3",{id:"example-only-transfer-files"},"Example: only transfer files"),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --to https://example.com/admin --only files\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --to https://example.com/admin --only files\n")))),(0,r.kt)("h2",{id:"exclude-data-types-during-transfer"},"Exclude data types during transfer"),(0,r.kt)("p",null,"The default ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer")," command transfers your content (entities and relations), files (assets), project configuration, and schemas. The ",(0,r.kt)("inlineCode",{parentName:"p"},"--exclude")," option allows you to exclude content, files, and the project configuration by passing these items in a comma-separated string with no spaces between the types. You can't exclude the schemas, as schema matching is used for ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi transfer"),"."),(0,r.kt)("h3",{id:"example-exclude-files-from-transfer"},"Example: exclude files from transfer"),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --to https://example.com/admin --exclude files\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --to https://example.com/admin --exclude files\n")))),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Any types excluded from the transfer will be deleted in your destination instance. For example, if you exclude ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," the project configuration in your destination instance will be deleted.")),(0,r.kt)("h2",{id:"manage-data-transfer-with-environment-variables"},"Manage data transfer with environment variables"),(0,r.kt)("p",null,"The environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"STRAPI_DISABLE_REMOTE_DATA_TRANSFER")," is available to disable remote data transfer. In addition to the ",(0,r.kt)("a",{parentName:"p",href:"/user-docs/users-roles-permissions/configuring-administrator-roles#plugins-and-settings"},"RBAC permissions")," in the admin panel this can help you secure your Strapi application. To use ",(0,r.kt)("inlineCode",{parentName:"p"},"STRAPI_DISABLE_REMOTE_DATA_TRANSFER")," you can add it to your ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file or preface the ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," script. See the following example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"STRAPI_DISABLE_REMOTE_DATA_TRANSFER=true yarn start\n")),(0,r.kt)("p",null,"Additional details on using environment variables in Strapi are available in the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/configurations/environment"},"Environment configurations documentation"),"."),(0,r.kt)("h2",{id:"test-the-transfer-command-locally"},"Test the transfer command locally"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," command is not intended for transferring data between two local instances. The ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/data-management/export"},(0,r.kt)("inlineCode",{parentName:"a"},"export"))," and ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/data-management/import"},(0,r.kt)("inlineCode",{parentName:"a"},"import"))," commands were designed for this purpose. However, you might want to test ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," locally on test instances to better understand the functionality before using it with a remote instance. The following documentation provides a fully-worked example of the ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer")," process."),(0,r.kt)("h3",{id:"create-and-clone-a-new-strapi-project"},"Create and clone a new Strapi project"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a new Strapi project using the installation command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-strapi-app@latest <project-name> --quickstart\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create at least 1 content type in the project. See the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/quick-start"},"Quick Start Guide")," if you need instructions on creating your first content type."),(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Do not add any data to your project at this step."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Commit the project to a git repository:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'git init\ngit add .\ngit commit -m "first commit"\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Clone the project repository:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd .. # move to the parent directory\ngit clone <path to created git repository>.git/ <new-instance-name>\n")))),(0,r.kt)("h3",{id:"add-data-to-the-first-strapi-instance"},"Add data to the first Strapi instance"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Return to the first Strapi instance and add data to the content type."),(0,r.kt)("li",{parentName:"ol"},"Stop the server on the first instance.")),(0,r.kt)("h3",{id:"create-a-transfer-token"},"Create a transfer token"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to the second Strapi instance and run the ",(0,r.kt)("inlineCode",{parentName:"li"},"build")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"start")," commands in the root directory:")),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn build && yarn start\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build && npm run start\n")))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Register an admin user."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/user-docs/settings/transfer-tokens"},"Create and copy a transfer token"),"."),(0,r.kt)("li",{parentName:"ol"},"Leave the server running.")),(0,r.kt)("h3",{id:"transfer-your-data"},"Transfer your data"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Return the the first Strapi instance."),(0,r.kt)("li",{parentName:"ol"},"In the terminal run the ",(0,r.kt)("inlineCode",{parentName:"li"},"strapi transfer")," command:")),(0,r.kt)(m,{groupId:"yarn-npm",mdxType:"Tabs"},(0,r.kt)(c,{value:"yarn",label:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi transfer --to http://localhost:1337/admin\n"))),(0,r.kt)(c,{value:"npm",label:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run strapi transfer -- --to http://localhost:1337/admin\n")))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"When prompted, apply the transfer token."),(0,r.kt)("li",{parentName:"ol"},"When the transfer is complete you can return to the second Strapi instance and see that the content is successfully transferred.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"In some cases you might receive a connection refused error targeting ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost"),". Try changing the address to ",(0,r.kt)("a",{parentName:"p",href:"http://127.0.0.1:1337/admin"},"http://127.0.0.1:1337/admin"),".")),(0,r.kt)(u,{mdxType:"FeedbackPlaceholder"}))}f.isMDXComponent=!0}}]);