"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[3513],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>k});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var m=n.createContext({}),s=function(t){var e=n.useContext(m),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=s(t.components);return n.createElement(m.Provider,{value:e},t.children)},o={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,m=t.parentName,d=p(t,["components","mdxType","originalType","parentName"]),u=s(a),k=r,g=u["".concat(m,".").concat(k)]||u[k]||o[k]||l;return a?n.createElement(g,i(i({ref:e},d),{},{components:a})):n.createElement(g,i({ref:e},d))}));function k(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=u;var p={};for(var m in e)hasOwnProperty.call(e,m)&&(p[m]=e[m]);p.originalType=t,p.mdxType="string"==typeof t?t:r,i[1]=p;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},61955:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>i,default:()=>N,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var n=a(83117),r=(a(67294),a(3905));const l={title:"SQL v3 to v4 migration",description:"Migrate a SQL database from Strapi v3 to Strapi v4",displayed_sidebar:"devDocsSidebar"},i="Data migration:Migrate SQL from Strapi v3 to v4",p={unversionedId:"dev-docs/migration/v3-to-v4/data/sql",id:"dev-docs/migration/v3-to-v4/data/sql",title:"SQL v3 to v4 migration",description:"Migrate a SQL database from Strapi v3 to Strapi v4",source:"@site/docs/dev-docs/migration/v3-to-v4/data/sql.md",sourceDirName:"dev-docs/migration/v3-to-v4/data",slug:"/dev-docs/migration/v3-to-v4/data/sql",permalink:"/aberabook/dev-docs/migration/v3-to-v4/data/sql",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/migration/v3-to-v4/data/sql.md",tags:[],version:"current",frontMatter:{title:"SQL v3 to v4 migration",description:"Migrate a SQL database from Strapi v3 to Strapi v4",displayed_sidebar:"devDocsSidebar"},sidebar:"devDocsSidebar",previous:{title:"Data migration",permalink:"/aberabook/dev-docs/migration/v3-to-v4/data-migration"},next:{title:"SQL relations cheatsheet",permalink:"/aberabook/dev-docs/migration/v3-to-v4/data/sql-relations"}},m={},s=[{value:"Global changes",id:"global-changes",level:2},{value:"Column name casing",id:"column-name-casing",level:3},{value:"Timestamps columns",id:"timestamps-columns",level:3},{value:"Changes impacting Strapi built-in tables",id:"changes-impacting-strapi-built-in-tables",level:2},{value:"Admin permissions",id:"admin-permissions",level:3},{value:"Core store",id:"core-store",level:3},{value:"Model definitions",id:"model-definitions",level:4},{value:"Content manager configurations",id:"content-manager-configurations",level:4},{value:"Permissions mapping",id:"permissions-mapping",level:4},{value:"Changes impacting Strapi plugins",id:"changes-impacting-strapi-plugins",level:2},{value:"Users and Permissions plugin",id:"users-and-permissions-plugin",level:3},{value:"Enabled permissions",id:"enabled-permissions",level:4},{value:"Permissions columns",id:"permissions-columns",level:4},{value:"Upload plugin",id:"upload-plugin",level:3},{value:"Internationalization (i18n) plugin",id:"internationalization-i18n-plugin",level:3}],d=t=>function(e){return console.warn("Component "+t+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)},o=d("Columns"),u=d("ColumnLeft"),k=d("ColumnRight"),g={toc:s};function N(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},g,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"data-migrationmigrate-sql-from-strapi-v3-to-v4"},"Data migration:Migrate SQL from Strapi v3 to v4"),(0,r.kt)("p",null,"The database layer of Strapi has been fully rewritten in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),". This documentation is designed to highlight the breaking changes introduced in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4")," that impact SQL databases, by comparing ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"v4")," table and column names, data structures and relations. "),(0,r.kt)("p",null,"Changes can be ",(0,r.kt)("a",{parentName:"p",href:"#global-changes"},"global")," (impacting any table) or more limited in scope, impacting only ",(0,r.kt)("a",{parentName:"p",href:"#changes-impacting-strapi-built-in-tables"},"specific tables")," or some ",(0,r.kt)("a",{parentName:"p",href:"#changes-impacting-strapi-plugins"},"Strapi plugins"),"."),(0,r.kt)("p",null,":::strapi Relations in Strapi v3 vs. v4\nThe ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/migration/v3-to-v4/data/sql-relations"},"v3 vs. v4 SQL relations cheatsheet")," is designed to help you understand the differences in model schemas and entity relationship diagrams between Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," and Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),".\n:::"),(0,r.kt)("admonition",{title:"\ud83d\udea7  Migration scripts",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/strapi/migration-scripts"},"Data migration scripts")," are currently in alpha/beta testing. Please feel free to share feedback in ",(0,r.kt)("a",{parentName:"p",href:"https://forum.strapi.io/t/strapi-v4-migration-scripts-are-live-for-testing/18266"},"the dedicated forum thread"),".")),(0,r.kt)("h2",{id:"global-changes"},"Global changes"),(0,r.kt)("p",null,"Changes in column casing and timestamps columns can affect all tables."),(0,r.kt)("h3",{id:"column-name-casing"},"Column name casing"),(0,r.kt)("p",null,":::strapi v3 / v4 comparison\nIn Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," column names can have different casings (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"PascalCase"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"camelCase"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"snake_case"),")."),(0,r.kt)("p",null,"In Strapi v4, every column name should use ",(0,r.kt)("inlineCode",{parentName:"p"},"snake_case"),".\n:::"),(0,r.kt)("p",null,"To migrate to Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),", make sure all column names use ",(0,r.kt)("inlineCode",{parentName:"p"},"snake_case"),". Attributes defined in another casing in the model schema will have their name automatically transformed to ",(0,r.kt)("inlineCode",{parentName:"p"},"snake_case")," when communicating with the database layer."),(0,r.kt)("h3",{id:"timestamps-columns"},"Timestamps columns"),(0,r.kt)("p",null,":::strapi v3 / v4 comparison\nTimestamps columns refer to the ",(0,r.kt)("inlineCode",{parentName:"p"},"created_at")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"updated_at")," columns."),(0,r.kt)("p",null,"In Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3"),", timestamps columns are given a default value (i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"CURRENT_TIMESTAMP"),") directly by the database layer."),(0,r.kt)("p",null,"In Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),", timestamps columns can't be renamed or disabled.\n:::"),(0,r.kt)("p",null,"To migrate to Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),", migrate timestamps with custom column names to the ",(0,r.kt)("inlineCode",{parentName:"p"},"created_at")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"updated_at")," fields, and remove the default value from the table structure."),(0,r.kt)("h2",{id:"changes-impacting-strapi-built-in-tables"},"Changes impacting Strapi built-in tables"),(0,r.kt)("p",null,"Strapi built-in tables have a different name in ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),", and Strapi v4 introduces new tables (indicated by the \u2728 emoji):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Table name in Strapi v3"),(0,r.kt)("th",{parentName:"tr",align:null},"Table name in Strapi v4"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_permission")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_permissions")," (see ",(0,r.kt)("a",{parentName:"td",href:"#admin-permissions"},"admin permissions"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_role")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_roles"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_administrator")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_users"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_users_roles")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_users_roles_links"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_webhooks")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_webhooks"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"core_store")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"strapi_core_store_settings")," (see ",(0,r.kt)("a",{parentName:"td",href:"#core-store"},"core store"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(non applicable)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2728 ",(0,r.kt)("inlineCode",{parentName:"td"},"admin_permissions_role_link"),"  (see ",(0,r.kt)("a",{parentName:"td",href:"#admin-permissions"},"admin permissions"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(non applicable)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2728 ",(0,r.kt)("inlineCode",{parentName:"td"},"strapi_migrations"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(non applicable)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2728 ",(0,r.kt)("inlineCode",{parentName:"td"},"strapi_api_tokens"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(non applicable)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2728 ",(0,r.kt)("inlineCode",{parentName:"td"},"strapi_database_schema"))))),(0,r.kt)("h3",{id:"admin-permissions"},"Admin permissions"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi_permission")," table used in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," is named ",(0,r.kt)("inlineCode",{parentName:"p"},"admin_permissions")," in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),", and is subject to the following other changes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The table structure is different in Strapi ",(0,r.kt)("inlineCode",{parentName:"li"},"v3")," and Strapi ",(0,r.kt)("inlineCode",{parentName:"li"},"v4"),":")),(0,r.kt)(o,{mdxType:"Columns"},(0,r.kt)(u,{title:"Strapi v3",mdxType:"ColumnLeft"},(0,r.kt)("img",{src:"/img/assets/data-migration/v3-strapi_permission.png",alt:"Strapi v3 permissions"})),(0,r.kt)(k,{title:"Strapi v4",mdxType:"ColumnRight"},(0,r.kt)("img",{src:"/img/assets/data-migration/v4-admin_permissions.png",alt:"Strapi v4 permissions"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The role relation in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4")," is handled in a join table named ",(0,r.kt)("inlineCode",{parentName:"p"},"admin_permissions_role_links"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"New indexes have been created for the ",(0,r.kt)("inlineCode",{parentName:"p"},"created_by_id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"updated_by_id")," columns of Strapi v3, with the following names:"),(0,r.kt)("table",{parentName:"li"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Column name in Strapi v3"),(0,r.kt)("th",{parentName:"tr",align:null},"Index name in Strapi v4"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"created_by_id")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_permissions_created_by_id_fk"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"updated_by_id")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"admin_permissions_updated_by_id_fk"))))))),(0,r.kt)("h3",{id:"core-store"},"Core store"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"core_store")," table used in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," is named ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi_core_store_settings")," in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),"."),(0,r.kt)("p",null,"The structure of the core store table remains untouched, but model definitions and content manager configurations have changed."),(0,r.kt)("h4",{id:"model-definitions"},"Model definitions"),(0,r.kt)("p",null,"All the rows that begin with ",(0,r.kt)("inlineCode",{parentName:"p"},"model_def_")," have been dropped and are no longer required."),(0,r.kt)("h4",{id:"content-manager-configurations"},"Content manager configurations"),(0,r.kt)("p",null,"All the rows that begin with ",(0,r.kt)("inlineCode",{parentName:"p"},"plugin_content_manager_configuration_content_types")," have been changed to match new unique identifiers (UIDs) and reflect ",(0,r.kt)("a",{parentName:"p",href:"#changes-impacting-strapi-built-in-tables"},"table names changes"),". These changes include both the suffix of the ",(0,r.kt)("inlineCode",{parentName:"p"},"key")," column and the ",(0,r.kt)("inlineCode",{parentName:"p"},"uid")," field in the ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," column."),(0,r.kt)("p",null,"In addition to all the content-types that have been renamed (see ",(0,r.kt)("a",{parentName:"p",href:"#changes-impacting-strapi-built-in-tables"},"table names changes"),"), the following UIDs have changed:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"UID in Strapi v3"),(0,r.kt)("th",{parentName:"tr",align:null},"UID in Strapi v4"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"application")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"api"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"plugins")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"plugin"))))),(0,r.kt)("h4",{id:"permissions-mapping"},"Permissions mapping"),(0,r.kt)("p",null,"The following tables list the mapping of all permissions between Strapi v3 and Strapi v4:"),(0,r.kt)("details",null,(0,r.kt)("summary",null,'Permission mapping for an example "restaurant" API:'),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"count"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"create"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.create")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"delete"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.delete")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"find"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.find")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"findone"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.findOne")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"update"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.update")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"application"),(0,r.kt)("td",{parentName:"tr",align:null},"restaurant"),(0,r.kt)("td",{parentName:"tr",align:null},"createlocalization"),(0,r.kt)("td",{parentName:"tr",align:null},"api::restaurant.restaurant.createLocalization"))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Permission mapping for the Users & Permission plugin:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"callback"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.callback")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"connect"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.connect")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"emailconfirmation"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.emailConfirmation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"forgotpassword"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.forgotPassword")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"register"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.register")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"resetpassword"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.resetPassword")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"auth"),(0,r.kt)("td",{parentName:"tr",align:null},"sendemailconfirmation"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.auth.sendEmailConfirmation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"count"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.count")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"create"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.create")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"destroy"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.destroy")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"destroyall"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"find"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.find")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"findone"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.findOne")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"me"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.me")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"user"),(0,r.kt)("td",{parentName:"tr",align:null},"update"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.user.update")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getrole"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.role.getRole")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getroles"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.role.getRoles")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"createrole"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.role.createRole")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"deleterole"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.role.deleteRole")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"updaterole"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.role.updateRole")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getpermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::users-permissions.permissions.getPermissions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getadvancedsettings"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"customroute"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getemailtemplate"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getpolicies"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getproviders"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"getroutes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"index"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"searchusers"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"updateadvancedsettings"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"updateemailtemplate"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"users-permissions"),(0,r.kt)("td",{parentName:"tr",align:null},"userspermissions"),(0,r.kt)("td",{parentName:"tr",align:null},"updateproviders"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)")))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Permission mapping for the i18n plugin:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"content-types"),(0,r.kt)("td",{parentName:"tr",align:null},"getnonlocalizedattributes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"iso-locales"),(0,r.kt)("td",{parentName:"tr",align:null},"listisolocales"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"locales"),(0,r.kt)("td",{parentName:"tr",align:null},"createlocale"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"locales"),(0,r.kt)("td",{parentName:"tr",align:null},"deletelocale"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"locales"),(0,r.kt)("td",{parentName:"tr",align:null},"listlocales"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::i18n.locales.listLocales")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"i18n"),(0,r.kt)("td",{parentName:"tr",align:null},"locales"),(0,r.kt)("td",{parentName:"tr",align:null},"updatelocale"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)")))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Permission mapping for the Content-Type Builder:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"builder"),(0,r.kt)("td",{parentName:"tr",align:null},"getreservednames"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"componentcategories"),(0,r.kt)("td",{parentName:"tr",align:null},"deletecategory"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"componentcategories"),(0,r.kt)("td",{parentName:"tr",align:null},"editcategory"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"components"),(0,r.kt)("td",{parentName:"tr",align:null},"createcomponent"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"components"),(0,r.kt)("td",{parentName:"tr",align:null},"deletecomponent"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"components"),(0,r.kt)("td",{parentName:"tr",align:null},"getcomponent"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::content-type-builder.components.getComponent")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"components"),(0,r.kt)("td",{parentName:"tr",align:null},"getcomponents"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::content-type-builder.components.getComponents")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"components"),(0,r.kt)("td",{parentName:"tr",align:null},"updatecomponent"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"connections"),(0,r.kt)("td",{parentName:"tr",align:null},"getconnections"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"contenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"createcontenttype"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"contenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"deletecontenttype"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"contenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"getcontenttype"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::content-type-builder.content-types.getContentType")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"contenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"getcontenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::content-type-builder.content-types.getContentTypes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"content-type-builder"),(0,r.kt)("td",{parentName:"tr",align:null},"contenttypes"),(0,r.kt)("td",{parentName:"tr",align:null},"updatecontenttype"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)")))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Permission mapping for the Upload plugin:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"count"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::upload.content-api.count")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"destroy"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::upload.content-api.destroy")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"find"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::upload.content-api.find")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"findone"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::upload.content-api.findOne")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"getsettings"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"search"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"updatesettings"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"upload"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::upload.content-api.upload"))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Permission mapping for the Email plugin:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 type"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 controller"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v3 action"),(0,r.kt)("th",{parentName:"tr",align:null},"Strapi v4 action"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"getsettings"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"send"),(0,r.kt)("td",{parentName:"tr",align:null},"plugin::email.email.send")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"test"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"(deleted)")))))),(0,r.kt)("details",null,(0,r.kt)("summary",null," Permission mapping for the Content Manager and the Documentation plugin:"),"All permissions were deleted."),(0,r.kt)("h2",{id:"changes-impacting-strapi-plugins"},"Changes impacting Strapi plugins"),(0,r.kt)("p",null,"Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4")," introduces breaking changes that impact the table names, column names and database structures used by the ",(0,r.kt)("a",{parentName:"p",href:"#users-and-permissions-plugin"},"Users & Permissions"),", ",(0,r.kt)("a",{parentName:"p",href:"#upload-plugin"},"Upload")," and ",(0,r.kt)("a",{parentName:"p",href:"#internationalization-i18n-plugin"},"Internationalization (i18n)")," plugins."),(0,r.kt)("h3",{id:"users-and-permissions-plugin"},"Users and Permissions plugin"),(0,r.kt)("p",null,"The tables and database structure used by the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins/users-permissions"},"Users & Permissions plugin")," are different in Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v3")," and Strapi ",(0,r.kt)("inlineCode",{parentName:"p"},"v4"),":"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Strapi v3:")),(0,r.kt)("img",{src:"/img/assets/data-migration/v3-up.png",alt:"v3"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Strapi v4:")),(0,r.kt)("img",{src:"/img/assets/data-migration/v4-up.png",alt:"v4"}),(0,r.kt)("h4",{id:"enabled-permissions"},"Enabled permissions"),(0,r.kt)("p",null,'In Strapi v3, permissions are always present in the table and are duplicated for each role. A permission "A" is set for a role "X" if permission "A" has the ',(0,r.kt)("inlineCode",{parentName:"p"},"enabled")," column value set to ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," (",(0,r.kt)("inlineCode",{parentName:"p"},"true"),")."),(0,r.kt)("p",null,"In Strapi v4, permissions that aren\u2019t enabled for any role are not present in the database table (i.e. there is no more ",(0,r.kt)("inlineCode",{parentName:"p"},"enabled"),' column). A permission "A" is set for a role "X" if there is:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'a permission "A" in the table rows'),(0,r.kt)("li",{parentName:"ul"},'and a row linking the role "X" to the permission "A" in the join table.')),(0,r.kt)("h4",{id:"permissions-columns"},"Permissions columns"),(0,r.kt)("p",null,"In Strapi v3, permissions are defined by 3 columns:",(0,r.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"controller"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"action"),"."),(0,r.kt)("p",null,"In Strapi v4, the ",(0,r.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"controller")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," columns are replaced by a single column named ",(0,r.kt)("inlineCode",{parentName:"p"},"action"),", aggregated like the following:",(0,r.kt)("inlineCode",{parentName:"p"},"action = transform(type).controller.action"),"."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"For more information and specific examples, you can compare the output of the same permission in Strapi v3 ",(0,r.kt)("inlineCode",{parentName:"p"},"users-permissions_permission")," and Strapi v4 ",(0,r.kt)("inlineCode",{parentName:"p"},"up_permissions")," tables.")),(0,r.kt)("h3",{id:"upload-plugin"},"Upload plugin"),(0,r.kt)("p",null,"In Strapi v3, the polymorphic table associated to the file content-type is named ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_file_morph")," and has both an ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_file_id")," attribute."),(0,r.kt)("p",null,"In Strapi v4, the data structure of the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins/upload"},"Upload plugin")," is subject to the following changes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The polymorphic table is named ",(0,r.kt)("inlineCode",{parentName:"li"},"files_related_morphs"),". The name includes ",(0,r.kt)("inlineCode",{parentName:"li"},"related")," since it concerns the file\u2019s ",(0,r.kt)("inlineCode",{parentName:"li"},"related")," attribute defined in the model schema."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"id")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"upload_file_id")," columns do not exist."),(0,r.kt)("li",{parentName:"ul"},"A new column ",(0,r.kt)("inlineCode",{parentName:"li"},"file_id")," is added, as a foreign key pointing to ",(0,r.kt)("inlineCode",{parentName:"li"},"files.id"),"."),(0,r.kt)("li",{parentName:"ul"},"An index is created for the ",(0,r.kt)("inlineCode",{parentName:"li"},"file_id")," column, as ",(0,r.kt)("inlineCode",{parentName:"li"},"files_related_morph_fk"),".")),(0,r.kt)("h3",{id:"internationalization-i18n-plugin"},"Internationalization (i18n) plugin"),(0,r.kt)("p",null,"In Strapi v4, localization tables used by the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins/i18n"},"Internationalization (i18n)")," plugin follow the ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/migration/v3-to-v4/data/sql-relations#circular-relations"},"circular many-to-many relationships migration")," and are renamed from ",(0,r.kt)("inlineCode",{parentName:"p"},"entities__localizations")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"entities_localizations_links"),"."),(0,r.kt)(o,{mdxType:"Columns"},(0,r.kt)(u,{title:"Strapi v3",mdxType:"ColumnLeft"},(0,r.kt)("img",{src:"/img/assets/data-migration/v3-i18n-localizations.png",alt:"Entity relationship diagram for i18n localizations in v3"})),(0,r.kt)(k,{title:"Strapi v4",mdxType:"ColumnRight"},(0,r.kt)("img",{src:"/img/assets/data-migration/v4-i18n-localizations.png",alt:"Entity relationship diagram for i18n localizations in v4"}))))}N.isMDXComponent=!0}}]);