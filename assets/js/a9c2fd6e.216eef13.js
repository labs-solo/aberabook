"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[2874,5918],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=d(n),c=r,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||i;return n?a.createElement(k,l(l({ref:t},s),{},{components:n})):a.createElement(k,l({ref:t},s))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},44545:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=n(83117),r=(n(67294),n(3905)),i=n(52823);const l={title:"Custom fields",description:"Learn how you can use custom fields to extend Strapi's content-types capabilities.",displayed_sidebar:"devDocsSidebar",canonicalUrl:"https://docs.strapi.io/dev-docs/development/custom-fields.html"},o="Custom fields",p={unversionedId:"dev-docs/custom-fields",id:"dev-docs/custom-fields",title:"Custom fields",description:"Learn how you can use custom fields to extend Strapi's content-types capabilities.",source:"@site/docs/dev-docs/custom-fields.md",sourceDirName:"dev-docs",slug:"/dev-docs/custom-fields",permalink:"/aberabook/dev-docs/custom-fields",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/custom-fields.md",tags:[],version:"current",frontMatter:{title:"Custom fields",description:"Learn how you can use custom fields to extend Strapi's content-types capabilities.",displayed_sidebar:"devDocsSidebar",canonicalUrl:"https://docs.strapi.io/dev-docs/development/custom-fields.html"},sidebar:"devDocsSidebar",previous:{title:"Plugin CLI",permalink:"/aberabook/dev-docs/plugins/development/plugin-cli"},next:{title:"Plugins extension",permalink:"/aberabook/dev-docs/plugins-extension"}},d={},s=[{value:"Registering a custom field on the server",id:"registering-a-custom-field-on-the-server",level:2},{value:"Registering a custom field in the admin panel",id:"registering-a-custom-field-in-the-admin-panel",level:2},{value:"Components",id:"components",level:3},{value:"Options",id:"options",level:3}],m={toc:s};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"custom-fields"},"Custom fields"),(0,r.kt)("p",null,"Custom fields extend Strapi\u2019s capabilities by adding new types of fields to content-types and components. Once created or added to Strapi via plugins, custom fields can be used in the Content-Type Builder and Content Manager just like built-in fields."),(0,r.kt)("p",null,"The present documentation is intended for custom field creators: it describes which APIs and functions developers must use to create a new custom field. The ",(0,r.kt)("a",{parentName:"p",href:"/user-docs/plugins/introduction-to-plugins.md#custom-fields"},"User Guide")," describes how to add and use custom fields from Strapi's admin panel."),(0,r.kt)("p",null,"It is recommended that you develop a dedicated ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins-development"},"plugin")," for custom fields. Custom field plugins include both a server and admin panel part. The custom field must be registered in both parts before it is usable in Strapi's admin panel."),(0,r.kt)("p",null,"Once created and used, custom fields are defined like any other attribute in the model's schema. An attribute using a custom field will have its type represented as ",(0,r.kt)("inlineCode",{parentName:"p"},"customField")," (i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"type: 'customField'"),"). Depending on the custom field being used a few additional properties may be present in the attribute's definition (see ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/backend-customization#custom-fields"},"models documentation"),")."),(0,r.kt)("admonition",{title:"NOTES",type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Though the recommended way to add a custom field is through creating a plugin, app-specific custom fields can also be registered within the global ",(0,r.kt)("inlineCode",{parentName:"li"},"register")," ",(0,r.kt)("a",{parentName:"li",href:"/dev-docs/configurations/functions"},"function")," found in ",(0,r.kt)("inlineCode",{parentName:"li"},"src/index.js")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"src/admin/app/js")," files."),(0,r.kt)("li",{parentName:"ul"},"Custom fields can only be shared using plugins."))),(0,r.kt)("h2",{id:"registering-a-custom-field-on-the-server"},"Registering a custom field on the server"),(0,r.kt)("admonition",{type:"prerequisites"},(0,r.kt)(i.default,{components:n.components,mdxType:"CustomFieldRequiresPlugin"})),(0,r.kt)("p",null,"Strapi's server needs to be aware of all the custom fields to ensure that an attribute using a custom field is valid."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi.customFields")," object exposes a ",(0,r.kt)("inlineCode",{parentName:"p"},"register()")," method on the ",(0,r.kt)("inlineCode",{parentName:"p"},"Strapi")," instance. This method is used to register custom fields on the server during the plugin's server ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/api/plugins/server-api#register"},"register lifecycle"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"strapi.customFields.register()")," registers one or several custom field(s) on the server by passing an object (or an array of objects) with the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the custom field"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"plugin"),(0,r.kt)("br",null),(0,r.kt)("br",null),"(",(0,r.kt)("em",{parentName:"td"},"optional"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the plugin creating the custom fields",(0,r.kt)("br",null),(0,r.kt)("br",null),"\u2757\ufe0f If defined, the ",(0,r.kt)("inlineCode",{parentName:"td"},"pluginId")," value on the admin panel registration must have the same value (see ",(0,r.kt)("a",{parentName:"td",href:"#registering-a-custom-field-in-the-admin-panel"},"Registering a custom field in the admin panel"),")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"The data type the custom field will use"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"inputSize"),(0,r.kt)("br",null),(0,r.kt)("br",null),"(",(0,r.kt)("em",{parentName:"td"},"optional"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Parameters to define the width of a custom field's input in the admin panel"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object"))))),(0,r.kt)("p",null,"The optional ",(0,r.kt)("inlineCode",{parentName:"p"},"inputSize")," object, when specified, must contain all of the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"default")),(0,r.kt)("td",{parentName:"tr",align:null},"The default size in columns that the input field will occupy in the 12-column grid in the admin panel.",(0,r.kt)("br",null),"The value can either be ",(0,r.kt)("inlineCode",{parentName:"td"},"4"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"6"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"8")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"12"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Integer"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"isResizable")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether the input can be resized or not"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Boolean"))))),(0,r.kt)("admonition",{title:"Current limitations",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Currently:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Custom fields cannot add new data types to Strapi and must use existing, built-in Strapi data types described in the ",(0,r.kt)("a",{parentName:"li",href:"/dev-docs/backend-customization#model-attributes"},"models' attributes")," documentation. "),(0,r.kt)("li",{parentName:"ul"},"You also cannot modify an existing data type."),(0,r.kt)("li",{parentName:"ul"},"Special data types unique to Strapi, such as relation, media, component, or dynamic zone data types, cannot be used in custom fields."))),(0,r.kt)("details",null,(0,r.kt)("summary",null,'Example: Registering an example "color" custom field on the server:'),(0,r.kt)("p",null,"In the following example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"color-picker")," plugin was created using the CLI generator (see ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins-development"},"plugins development"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./src/plugins/color-picker/server/register.js"',title:'"./src/plugins/color-picker/server/register.js"'},'"use strict";\n\nmodule.exports = ({ strapi }) => {\n  strapi.customFields.register({\n    name: "color",\n    plugin: "color-picker",\n    type: "string",\n    inputSize: {\n      // optional\n      default: 4,\n      isResizable: true,\n    },\n  });\n};\n')),(0,r.kt)("p",null,"The custom field could also be declared directly within the ",(0,r.kt)("inlineCode",{parentName:"p"},"strapi-server.js")," file if you didn't have the plugin code scaffolded by the CLI generator:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./src/plugins/color-picker/strapi-server.js"',title:'"./src/plugins/color-picker/strapi-server.js"'},'module.exports = {\n  register({ strapi }) {\n    strapi.customFields.register({\n      name: "color",\n      plugin: "color-picker",\n      type: "text",\n      inputSize: {\n        // optional\n        default: 4,\n        isResizable: true,\n      },\n    });\n  },\n};\n'))),(0,r.kt)("h2",{id:"registering-a-custom-field-in-the-admin-panel"},"Registering a custom field in the admin panel"),(0,r.kt)("admonition",{type:"prerequisites"},(0,r.kt)(i.default,{components:n.components,mdxType:"CustomFieldRequiresPlugin"})),(0,r.kt)("p",null,"Custom fields must be registered in Strapi's admin panel to be available in the Content-type Builder and the Content Manager."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"app.customFields")," object exposes a ",(0,r.kt)("inlineCode",{parentName:"p"},"register()")," method on the ",(0,r.kt)("inlineCode",{parentName:"p"},"StrapiApp")," instance. This method is used to register custom fields in the admin panel during the plugin's admin ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/api/plugins/admin-panel-api#register"},"register lifecycle"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"app.customFields.register()")," registers one or several custom field(s) in the admin panel by passing an object (or an array of objects) with the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the custom field"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"pluginId"),(0,r.kt)("br",null),(0,r.kt)("br",null),"(",(0,r.kt)("em",{parentName:"td"},"optional"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the plugin creating the custom field",(0,r.kt)("br",null),(0,r.kt)("br",null),"\u2757\ufe0f If defined, the ",(0,r.kt)("inlineCode",{parentName:"td"},"plugin")," value on the server registration must have the same value (see ",(0,r.kt)("a",{parentName:"td",href:"#registering-a-custom-field-on-the-server"},"Registering a custom field on the server"),")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"Existing Strapi data type the custom field will use",(0,r.kt)("br",null),(0,r.kt)("br",null),"\u2757\ufe0f Relations, media, components, or dynamic zones cannot be used."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"icon"),(0,r.kt)("br",null),(0,r.kt)("br",null),"(",(0,r.kt)("em",{parentName:"td"},"optional"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Icon for the custom field"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"React.ComponentType"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"intlLabel")),(0,r.kt)("td",{parentName:"tr",align:null},"Translation for the name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"intlDescription")),(0,r.kt)("td",{parentName:"tr",align:null},"Translation for the description"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"components")),(0,r.kt)("td",{parentName:"tr",align:null},"Components needed to display the custom field in the Content Manager (see ",(0,r.kt)("a",{parentName:"td",href:"#components"},"components"),")"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options"),(0,r.kt)("br",null),(0,r.kt)("br",null),"(",(0,r.kt)("em",{parentName:"td"},"optional"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"Options to be used by the Content-type Builder (see ",(0,r.kt)("a",{parentName:"td",href:"#options"},"options"),")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object"))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,'Example: Registering an example "color" custom field in the admin panel:'),(0,r.kt)("p",null,"In the following example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"color-picker")," plugin was created using the CLI generator (see ",(0,r.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/plugins-development"},"plugins development"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="./src/plugins/color-picker/admin/src/index.js"',title:'"./src/plugins/color-picker/admin/src/index.js"'},'import ColorPickerIcon from "./components/ColorPicker/ColorPickerIcon";\n\nexport default {\n  register(app) {\n    // ... app.addMenuLink() goes here\n    // ... app.registerPlugin() goes here\n\n    app.customFields.register({\n      name: "color",\n      pluginId: "color-picker", // the custom field is created by a color-picker plugin\n      type: "string", // the color will be stored as a string\n      intlLabel: {\n        id: "color-picker.color.label",\n        defaultMessage: "Color",\n      },\n      intlDescription: {\n        id: "color-picker.color.description",\n        defaultMessage: "Select any color",\n      },\n      icon: ColorPickerIcon, // don\'t forget to create/import your icon component\n      components: {\n        Input: async () =>\n          import(\n            /* webpackChunkName: "input-component" */ "./components/Input"\n          ),\n      },\n      options: {\n        // declare options here\n      },\n    });\n  },\n\n  // ... bootstrap() goes here\n};\n'))),(0,r.kt)("h3",{id:"components"},"Components"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"app.customFields.register()")," must pass a ",(0,r.kt)("inlineCode",{parentName:"p"},"components")," object with an ",(0,r.kt)("inlineCode",{parentName:"p"},"Input")," React component to use in the Content Manager's edit view."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Example: Registering an Input component"),(0,r.kt)("p",null,"In the following example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"color-picker")," plugin was created using the CLI generator (see ",(0,r.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/plugins-development"},"plugins development"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="./src/plugins/color-picker/admin/src/index.js"',title:'"./src/plugins/color-picker/admin/src/index.js"'},'export default {\n  register(app) {\n    app.customFields.register({\n      // \u2026\n      components: {\n        Input: async () =>\n          import(/* webpackChunkName: "input-component" */ "./Input"),\n      },\n      // \u2026\n    });\n  },\n};\n'))),(0,r.kt)("p",null,"Custom field input components receive the following props:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Prop"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attribute")),(0,r.kt)("td",{parentName:"tr",align:null},"The attribute object with custom field's underlying Strapi type and options"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{ type: String, customField: String }"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"description")),(0,r.kt)("td",{parentName:"tr",align:null},"The field description set in ",(0,r.kt)("a",{parentName:"td",href:"/user-docs/content-manager/configuring-view-of-content-type#configuring-the-edit-view"},"configure the view")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"placeholder")),(0,r.kt)("td",{parentName:"tr",align:null},"The field placeholder set in ",(0,r.kt)("a",{parentName:"td",href:"/user-docs/content-manager/configuring-view-of-content-type#configuring-the-edit-view"},"configure the view")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"hint")),(0,r.kt)("td",{parentName:"tr",align:null},"The field description set in ",(0,r.kt)("a",{parentName:"td",href:"/user-docs/content-manager/configuring-view-of-content-type#configuring-the-edit-view"},"configure the view")," along with min/max ",(0,r.kt)("a",{parentName:"td",href:"/dev-docs/backend-customization/models#validations"},"validation requirements")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"The field name set in the content-type builder"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"intlLabel")),(0,r.kt)("td",{parentName:"tr",align:null},"The field name set in the content-type builder or configure the view"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"onChange")),(0,r.kt)("td",{parentName:"tr",align:null},"The handler for the input change event. The ",(0,r.kt)("inlineCode",{parentName:"td"},"name")," argument references the field name. The ",(0,r.kt)("inlineCode",{parentName:"td"},"type")," argument references the underlying Strapi type"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"({ target: { name: String value: unknown type: String } }) => void"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"contentTypeUID")),(0,r.kt)("td",{parentName:"tr",align:null},"The content-type the field belongs to"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"The custom field uid, for example ",(0,r.kt)("inlineCode",{parentName:"td"},"plugin::color-picker.color")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"value")),(0,r.kt)("td",{parentName:"tr",align:null},"The input value the underlying Strapi type expects"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"unknown"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"required")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether or not the field is required"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boolean"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"error")),(0,r.kt)("td",{parentName:"tr",align:null},"Error received after validation"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"disabled")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether or not the input is disabled"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boolean"))))),(0,r.kt)("p",null,"As of Strapi v4.13.0, fields in the Content Manager can be auto-focussed via the ",(0,r.kt)("inlineCode",{parentName:"p"},"URLSearchParam")," ",(0,r.kt)("inlineCode",{parentName:"p"},"field"),". It's recommended that your input component is wrapped in React's ",(0,r.kt)("a",{parentName:"p",href:"https://react.dev/reference/react/forwardRef"},(0,r.kt)("inlineCode",{parentName:"a"},"forwardRef"))," method; you should pass the corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},"input")," element."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Example: A custom text input"),(0,r.kt)("p",null,"In the following example we're providing a custom text input that is controlled. All inputs should be controlled otherwise their data will not be submitted on save."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="./src/plugins/<plugin-name>/admin/src/components/Input.js"',title:'"./src/plugins/<plugin-name>/admin/src/components/Input.js"'},'import * as React from "react";\n\nimport { useIntl } from "react-intl";\n\nconst Input = React.forwardRef((props, ref) => {\n  const { attribute, disabled, intlLabel, name, onChange, required, value } =\n    props; // these are just some of the props passed by the content-manager\n\n  const { formatMessage } = useIntl();\n\n  const handleChange = (e) => {\n    onChange({\n      target: { name, type: attribute.type, value: e.currentTarget.value },\n    });\n  };\n\n  return (\n    <label>\n      {formatMessage(intlLabel)}\n      <input\n        ref={ref}\n        name={name}\n        disabled={disabled}\n        value={value}\n        required={required}\n        onChange={handleChange}\n      />\n    </label>\n  );\n});\n\nexport default Input;\n'))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"For a more detailed view of the props provided to the customFields and how they can be used check out the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strapi/strapi/blob/main/packages/plugins/color-picker/admin/src/components/ColorPickerInput.tsx#L80-L95"},(0,r.kt)("inlineCode",{parentName:"a"},"ColorPickerInput")," file")," in the Strapi codebase.")),(0,r.kt)("h3",{id:"options"},"Options"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"app.customFields.register()")," can pass an additional ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object with the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Options parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"base")),(0,r.kt)("td",{parentName:"tr",align:null},"Settings available in the ",(0,r.kt)("em",{parentName:"td"},"Base settings")," tab of the field in the Content-type Builder"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"Array of Objects"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"advanced")),(0,r.kt)("td",{parentName:"tr",align:null},"Settings available in the ",(0,r.kt)("em",{parentName:"td"},"Advanced settings")," tab of the field in the Content-type Builder"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"Array of Objects"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"validator")),(0,r.kt)("td",{parentName:"tr",align:null},"Validator function returning an object, used to sanitize input. Uses a ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/jquense/yup/tree/pre-v1"},(0,r.kt)("inlineCode",{parentName:"a"},"yup")," schema object"),"."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Function"))))),(0,r.kt)("p",null,"Both ",(0,r.kt)("inlineCode",{parentName:"p"},"base")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"advanced")," settings accept an object or an array of objects, each object being a settings section. Each settings section could include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a ",(0,r.kt)("inlineCode",{parentName:"li"},"sectionTitle")," to declare the title of the section as an ",(0,r.kt)("a",{parentName:"li",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject"))),(0,r.kt)("li",{parentName:"ul"},"and a list of ",(0,r.kt)("inlineCode",{parentName:"li"},"items")," as an array of objects.")),(0,r.kt)("p",null,"Each object in the ",(0,r.kt)("inlineCode",{parentName:"p"},"items")," array can contain the following parameters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Items parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},"Label of the input.",(0,r.kt)("br",null),"Must use the ",(0,r.kt)("inlineCode",{parentName:"td"},"options.settingName")," format."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"description")),(0,r.kt)("td",{parentName:"tr",align:null},"Description of the input to use in the Content-type Builder"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"intlLabel")),(0,r.kt)("td",{parentName:"tr",align:null},"Translation for the label of the input"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://formatjs.io/docs/react-intl/"},(0,r.kt)("inlineCode",{parentName:"a"},"IntlObject")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},"Type of the input (e.g., ",(0,r.kt)("inlineCode",{parentName:"td"},"select"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"checkbox"),")"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,'Example: Declaring options for an example "color" custom field:'),(0,r.kt)("p",null,"In the following example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"color-picker")," plugin was created using the CLI generator (see ",(0,r.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/plugins-development"},"plugins development"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="./src/plugins/color-picker/admin/src/index.js"',title:'"./src/plugins/color-picker/admin/src/index.js"'},'// imports go here (ColorPickerIcon, pluginId, yup package\u2026)\n\nexport default {\n  register(app) {\n    // ... app.addMenuLink() goes here\n    // ... app.registerPlugin() goes here\n    app.customFields.register({\n      // \u2026\n      options: {\n        base: [\n          /*\n            Declare settings to be added to the "Base settings" section\n            of the field in the Content-Type Builder\n          */\n          {\n            sectionTitle: {\n              // Add a "Format" settings section\n              id: "color-picker.color.section.format",\n              defaultMessage: "Format",\n            },\n            items: [\n              // Add settings items to the section\n              {\n                /*\n                  Add a "Color format" dropdown\n                  to choose between 2 different format options\n                  for the color value: hexadecimal or RGBA\n                */\n                intlLabel: {\n                  id: "color-picker.color.format.label",\n                  defaultMessage: "Color format",\n                },\n                name: "options.format",\n                type: "select",\n                value: "hex", // option selected by default\n                options: [\n                  // List all available "Color format" options\n                  {\n                    key: "hex",\n                    defaultValue: "hex",\n                    value: "hex",\n                    metadatas: {\n                      intlLabel: {\n                        id: "color-picker.color.format.hex",\n                        defaultMessage: "Hexadecimal",\n                      },\n                    },\n                  },\n                  {\n                    key: "rgba",\n                    value: "rgba",\n                    metadatas: {\n                      intlLabel: {\n                        id: "color-picker.color.format.rgba",\n                        defaultMessage: "RGBA",\n                      },\n                    },\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n        advanced: [\n          /*\n            Declare settings to be added to the "Advanced settings" section\n            of the field in the Content-Type Builder\n          */\n        ],\n        validator: (args) => ({\n          format: yup.string().required({\n            id: "options.color-picker.format.error",\n            defaultMessage: "The color format is required",\n          }),\n        }),\n      },\n    });\n  },\n};\n'))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The Strapi codebase gives an example of how settings objects can be described: check the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strapi/strapi/blob/main/packages/core/content-type-builder/admin/src/components/FormModal/attributes/baseForm.ts"},(0,r.kt)("inlineCode",{parentName:"a"},"baseForm.ts"))," file for the ",(0,r.kt)("inlineCode",{parentName:"p"},"base")," settings and the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strapi/strapi/blob/main/packages/core/content-type-builder/admin/src/components/FormModal/attributes/advancedForm.ts"},(0,r.kt)("inlineCode",{parentName:"a"},"advancedForm.js"))," file for the ",(0,r.kt)("inlineCode",{parentName:"p"},"advanced")," settings. The base form lists the settings items inline but the advanced form gets the items from an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strapi/strapi/blob/main/packages/core/content-type-builder/admin/src/components/FormModal/attributes/attributeOptions.js"},(0,r.kt)("inlineCode",{parentName:"a"},"attributeOptions.js"))," file.")))}u.isMDXComponent=!0},52823:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var a=n(83117),r=(n(67294),n(3905));const i={},l=void 0,o={unversionedId:"snippets/custom-field-requires-plugin",id:"snippets/custom-field-requires-plugin",title:"custom-field-requires-plugin",description:"Registering a custom field through a plugin requires creating and enabling a plugin (see Plugins development).",source:"@site/docs/snippets/custom-field-requires-plugin.md",sourceDirName:"snippets",slug:"/snippets/custom-field-requires-plugin",permalink:"/aberabook/snippets/custom-field-requires-plugin",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/snippets/custom-field-requires-plugin.md",tags:[],version:"current",frontMatter:{}},p={},d=[],s={toc:d};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Registering a custom field through a plugin requires creating and enabling a plugin (see ",(0,r.kt)("a",{parentName:"p",href:"/dev-docs/plugins-development#create-a-plugin"},"Plugins development"),")."))}m.isMDXComponent=!0}}]);