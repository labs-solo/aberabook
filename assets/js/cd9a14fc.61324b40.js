"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[2213],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,b=c["".concat(d,".").concat(m)]||c[m]||u[m]||o;return a?n.createElement(b,i(i({ref:t},s),{},{components:a})):n.createElement(b,i({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=c;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},913:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(83117),r=(a(67294),a(3905));const o={title:"Database",displayed_sidebar:"cloudSidebar",description:"Configure your own database on Strapi Cloud.",canonicalUrl:"https://docs.strapi.io/cloud/advanced/database.html"},i="Database",l={unversionedId:"cloud/advanced/database",id:"cloud/advanced/database",title:"Database",description:"Configure your own database on Strapi Cloud.",source:"@site/docs/cloud/advanced/database.md",sourceDirName:"cloud/advanced",slug:"/cloud/advanced/database",permalink:"/aberabook/cloud/advanced/database",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/cloud/advanced/database.md",tags:[],version:"current",frontMatter:{title:"Database",displayed_sidebar:"cloudSidebar",description:"Configure your own database on Strapi Cloud.",canonicalUrl:"https://docs.strapi.io/cloud/advanced/database.html"},sidebar:"cloudSidebar",previous:{title:"Cloud CLI",permalink:"/aberabook/cloud/cli/cloud-cli"},next:{title:"Email Provider",permalink:"/aberabook/cloud/advanced/email"}},d={},p=[{value:"Configuration",id:"configuration",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Reverting to the default database",id:"reverting-to-the-default-database",level:2}],s=(u="ThemedImage",function(e){return console.warn("Component "+u+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var u;const c={toc:p};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"database"},"Database"),(0,r.kt)("p",null,"Strapi Cloud provides a pre-configured PostgreSQL database by default. However, you can also configure it to utilize an external SQL database, if needed."),(0,r.kt)("admonition",{type:"prerequisites"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"A local Strapi project running on ",(0,r.kt)("inlineCode",{parentName:"li"},"v4.8.2+"),"."),(0,r.kt)("li",{parentName:"ul"},"Credentials for external database."),(0,r.kt)("li",{parentName:"ul"},"If using an existing database, the schema must match the Strapi project schema."))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"While it's possible to use an external database with Strapi Cloud, you should do it while keeping in mind the following considerations:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Strapi Cloud already provides a managed database that is optimized for Strapi."),(0,r.kt)("li",{parentName:"ul"},"Using an external database may result in unexpected behavior and/or performance issues (e.g., network latency may impact performance). For performance reasons, it's recommended to host your external database close to the region where your Strapi Cloud project is hosted. You can find where your Strapi Cloud project is hosted in your Project Settings (see ",(0,r.kt)("a",{parentName:"li",href:"/cloud/projects/settings#general"},"Project Settings > General > Selected Region"),")."),(0,r.kt)("li",{parentName:"ul"},"Strapi can't provide security or support with external databases used with Strapi Cloud."))),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The project ",(0,r.kt)("inlineCode",{parentName:"p"},"./config/database.js")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"./config/database.ts")," file must match the configuration found in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.strapi.io/dev-docs/configurations/database#environment-variables-in-database-configurations"},"environment variables in database configurations")," section."),(0,r.kt)("p",null,"Before pushing changes, add environment variables to the Strapi Cloud project:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Log into Strapi Cloud and click on the corresponding project on the Projects page.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on the ",(0,r.kt)("strong",{parentName:"p"},"Settings")," tab and choose ",(0,r.kt)("strong",{parentName:"p"},"Variables")," in the left menu.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add the following environment variables:"),(0,r.kt)("table",{parentName:"li"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Variable"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_CLIENT")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_HOST")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db_host")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_PORT")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db_port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_NAME")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db_name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_USERNAME")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db_username")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_PASSWORD")),(0,r.kt)("td",{parentName:"tr",align:null},"your_db_password")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_SSL_REJECT_UNAUTHORIZED")),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATABASE_SCHEMA")),(0,r.kt)("td",{parentName:"tr",align:null},"public"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Save"),"."))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"To ensure a smooth deployment, it is recommended to not change the names of the environment variables.")),(0,r.kt)("h2",{id:"deployment"},"Deployment"),(0,r.kt)("p",null,"To deploy the project and utilize the external database, push the changes from earlier. This will trigger a rebuild and new deployment of the Strapi Cloud project."),(0,r.kt)(s,{alt:"Deployment",sources:{light:"/img/assets/cloud/deploy-logs.png",dark:"/img/assets/cloud/deploy-logs_DARK.png"},mdxType:"ThemedImage"}),(0,r.kt)("p",null,"Once the application finishes building, the project will use the external database."),(0,r.kt)("h2",{id:"reverting-to-the-default-database"},"Reverting to the default database"),(0,r.kt)("p",null,"To revert back to the default database, remove the previously added environment variables related to the external database from the Strapi Cloud project dashboard, and save. For the changes to take effect, you must redeploy the Strapi Cloud project."))}m.isMDXComponent=!0}}]);