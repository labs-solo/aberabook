"use strict";(self.webpackChunkstrapi_docs=self.webpackChunkstrapi_docs||[]).push([[556],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),c=l,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return n?a.createElement(k,i(i({ref:t},d),{},{components:n})):a.createElement(k,i({ref:t},d))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6515:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>k,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(83117),l=(n(67294),n(3905));const r={title:"Models",description:"Strapi models (i.e. content-types, components, and dynamic zones) define a representation of the data structure.",_tags:["beforeCreate","beforeCreateMany","afterCreate","afterCreateMany","beforeUpdate","beforeUpdateMany","afterUpdate","afterUpdateMany","beforeDelete","beforeDeleteMany","afterDelete","afterDeleteMany","beforeCount","afterCount","beforeFindOne","afterFindOne","beforeFindMany","afterFindMany"],sidebarDepth:3},i="Models",o={unversionedId:"dev-docs/backend-customization/models",id:"dev-docs/backend-customization/models",title:"Models",description:"Strapi models (i.e. content-types, components, and dynamic zones) define a representation of the data structure.",source:"@site/docs/dev-docs/backend-customization/models.md",sourceDirName:"dev-docs/backend-customization",slug:"/dev-docs/backend-customization/models",permalink:"/aberabook/dev-docs/backend-customization/models",draft:!1,editUrl:"https://github.com/labs-solo/aberabook/edit/main/docusaurus/docs/dev-docs/backend-customization/models.md",tags:[],version:"current",frontMatter:{title:"Models",description:"Strapi models (i.e. content-types, components, and dynamic zones) define a representation of the data structure.",_tags:["beforeCreate","beforeCreateMany","afterCreate","afterCreateMany","beforeUpdate","beforeUpdateMany","afterUpdate","afterUpdateMany","beforeDelete","beforeDeleteMany","afterDelete","afterDeleteMany","beforeCount","afterCount","beforeFindOne","afterFindOne","beforeFindMany","afterFindMany"],sidebarDepth:3},sidebar:"devDocsSidebar",previous:{title:"Services",permalink:"/aberabook/dev-docs/backend-customization/services"},next:{title:"Webhooks",permalink:"/aberabook/dev-docs/backend-customization/webhooks"}},s={},p=[{value:"Model creation",id:"model-creation",level:2},{value:"Content-types",id:"content-types",level:3},{value:"Components",id:"components",level:3},{value:"Model schema",id:"model-schema",level:2},{value:"Model settings",id:"model-settings",level:3},{value:"Model information",id:"model-information",level:3},{value:"Model attributes",id:"model-attributes",level:3},{value:"Validations",id:"validations",level:4},{value:"Database validations and settings",id:"database-validations-and-settings",level:4},{value:"<code>uid</code> type",id:"uid-type",level:4},{value:"Relations",id:"relations",level:4},{value:"Custom fields",id:"custom-fields",level:4},{value:"Components",id:"components-1",level:4},{value:"Dynamic zones",id:"dynamic-zones",level:4},{value:"Model options",id:"model-options",level:3},{value:"Lifecycle hooks",id:"lifecycle-hooks",level:2},{value:"Available lifecycle events",id:"available-lifecycle-events",level:3},{value:"Hook <code>event</code> object",id:"hook-event-object",level:3},{value:"Declarative and programmatic usage",id:"declarative-and-programmatic-usage",level:3},{value:"Declarative usage",id:"declarative-usage",level:4},{value:"Programmatic usage",id:"programmatic-usage",level:4}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",t)},m=d("Tabs"),u=d("TabItem"),c={toc:p};function k(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"models"},"Models"),(0,l.kt)("p",null,"As Strapi is a headless Content Management System (CMS), creating a data structure for the content is one of the most important aspects of using the software. Models define a representation of the data structure."),(0,l.kt)("p",null,"There are 2 different types of models in Strapi:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"content-types, which can be collection types or single types, depending on how many entries they manage,"),(0,l.kt)("li",{parentName:"ul"},"and components that are data structures re-usable in multiple content-types.")),(0,l.kt)("p",null,"If you are just starting out, it is convenient to generate some models with the ",(0,l.kt)("a",{parentName:"p",href:"/user-docs/content-type-builder"},"Content-type Builder")," directly in the admin panel. The user interface takes over a lot of validation tasks and showcases all the options available to create the content's data structure. The generated model mappings can then be reviewed at the code level using this documentation."),(0,l.kt)("h2",{id:"model-creation"},"Model creation"),(0,l.kt)("p",null,"Content-types and components models are created and stored differently."),(0,l.kt)("h3",{id:"content-types"},"Content-types"),(0,l.kt)("p",null,"Content-types in Strapi can be created:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"with the ",(0,l.kt)("a",{parentName:"li",href:"/aberabook/user-docs/content-type-builder"},"Content-type Builder in the admin panel"),","),(0,l.kt)("li",{parentName:"ul"},"or with ",(0,l.kt)("a",{parentName:"li",href:"/dev-docs/cli#strapi-generate"},"Strapi's interactive CLI ",(0,l.kt)("inlineCode",{parentName:"a"},"strapi generate"))," command.")),(0,l.kt)("p",null,"The content-types use the following files:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"schema.json")," for the model's ",(0,l.kt)("a",{parentName:"li",href:"#model-schema"},"schema")," definition. (generated automatically, when creating content-type with either method)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lifecycles.js")," for ",(0,l.kt)("a",{parentName:"li",href:"#lifecycle-hooks"},"lifecycle hooks"),". This file must be created manually.")),(0,l.kt)("p",null,"These models files are stored in ",(0,l.kt)("inlineCode",{parentName:"p"},"./src/api/[api-name]/content-types/[content-type-name]/"),", and any JavaScript or JSON file found in these folders will be loaded as a content-type's model (see ",(0,l.kt)("a",{parentName:"p",href:"/dev-docs/project-structure"},"project structure"),")."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"In ",(0,l.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/typescript"},"TypeScript"),"-enabled projects, schema typings can be generated using the ",(0,l.kt)("inlineCode",{parentName:"p"},"ts:generate-types")," command (e.g., ",(0,l.kt)("inlineCode",{parentName:"p"},"npm run strapi ts:generate-types")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"yarn strapi ts:generate-types"),").")),(0,l.kt)("h3",{id:"components"},"Components"),(0,l.kt)("p",null,"Component models can't be created with CLI tools. Use the ",(0,l.kt)("a",{parentName:"p",href:"/user-docs/content-type-builder"},"Content-type Builder")," or create them manually."),(0,l.kt)("p",null,"Components models are stored in the ",(0,l.kt)("inlineCode",{parentName:"p"},"./src/components")," folder. Every component has to be inside a subfolder, named after the category the component belongs to (see ",(0,l.kt)("a",{parentName:"p",href:"/dev-docs/project-structure"},"project structure"),")."),(0,l.kt)("h2",{id:"model-schema"},"Model schema"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"schema.json")," file of a model consists of:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#model-settings"},"settings"),", such as the kind of content-type the model represents or the table name in which the data should be stored,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#model-information"},"information"),", mostly used to display the model in the admin panel and access it through the REST and GraphQL APIs,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#model-attributes"},"attributes"),", which describe the data structure of the model,"),(0,l.kt)("li",{parentName:"ul"},"and ",(0,l.kt)("a",{parentName:"li",href:"#model-options"},"options")," used to defined specific behaviors on the model.")),(0,l.kt)("h3",{id:"model-settings"},"Model settings"),(0,l.kt)("p",null,"General settings for the model can be configured with the following parameters:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"collectionName")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Database table name in which the data should be stored")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"kind"),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("em",{parentName:"td"},"Optional,",(0,l.kt)("br",null),"only for content-types")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Defines if the content-type is:",(0,l.kt)("ul",null,(0,l.kt)("li",null,"a collection type (",(0,l.kt)("inlineCode",{parentName:"td"},"collectionType"),")"),(0,l.kt)("li",null,"or a single type (",(0,l.kt)("inlineCode",{parentName:"td"},"singleType"),")")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'// ./src/api/[api-name]/content-types/restaurant/schema.json\n\n{\n  "kind": "collectionType",\n  "collectionName": "Restaurants_v1",\n}\n')),(0,l.kt)("h3",{id:"model-information"},"Model information"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"info")," key in the model's schema describes information used to display the model in the admin panel and access it through the Content API. It includes the following parameters:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"displayName")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Default name to use in the admin panel")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"singularName")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Singular form of the content-type name.",(0,l.kt)("br",null),"Used to generate the API routes and databases/tables collection.",(0,l.kt)("br",null),(0,l.kt)("br",null),"Should be kebab-case.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"pluralName")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Plural form of the content-type name.",(0,l.kt)("br",null),"Used to generate the API routes and databases/tables collection.",(0,l.kt)("br",null),(0,l.kt)("br",null),"Should be kebab-case.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"description")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Description of the model")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/restaurant/schema.json"',title:'"./src/api/[api-name]/content-types/restaurant/schema.json"'},'\n  "info": {\n    "displayName": "Restaurant",\n    "singularName": "restaurant",\n    "pluralName": "restaurants",\n    "description": ""\n  },\n')),(0,l.kt)("h3",{id:"model-attributes"},"Model attributes"),(0,l.kt)("p",null,"The data structure of a model consists of a list of attributes. Each attribute has a ",(0,l.kt)("inlineCode",{parentName:"p"},"type")," parameter, which describes its nature and defines the attribute as a simple piece of data or a more complex structure used by Strapi."),(0,l.kt)("p",null,"Many types of attributes are available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"scalar types (e.g. strings, dates, numbers, booleans, etc.),"),(0,l.kt)("li",{parentName:"ul"},"Strapi-specific types, such as:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"media")," for files uploaded through the ",(0,l.kt)("a",{parentName:"li",href:"/aberabook/user-docs/content-type-builder/configuring-fields-content-type#media"},"Media library")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"relation")," to describe a ",(0,l.kt)("a",{parentName:"li",href:"#relations"},"relation")," between content-types"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"customField")," to describe ",(0,l.kt)("a",{parentName:"li",href:"#custom-fields"},"custom fields")," and their specific keys"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"component")," to define a ",(0,l.kt)("a",{parentName:"li",href:"#components-1"},"component")," (i.e. a data structure usable in multiple content-types)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"dynamiczone")," to define a ",(0,l.kt)("a",{parentName:"li",href:"#dynamic-zones"},"dynamic zone")," (i.e. a flexible space based on a list of components)"),(0,l.kt)("li",{parentName:"ul"},"and the ",(0,l.kt)("inlineCode",{parentName:"li"},"locale")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"localizations")," types, only used by the ",(0,l.kt)("a",{parentName:"li",href:"/aberabook/dev-docs/plugins/i18n"},"Internationalization (i18n) plugin"))))),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"type")," parameter of an attribute should be one of the following values:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Type categories"),(0,l.kt)("th",{parentName:"tr",align:null},"Available types"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"String types"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"string"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"text"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"richtext")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"enumeration"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"email")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"password")),(0,l.kt)("li",null,(0,l.kt)("a",{parentName:"td",href:"#uid-type"},(0,l.kt)("inlineCode",{parentName:"a"},"uid")))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Date types"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"date"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"time"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"datetime"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"timestamp"))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Number types"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"integer")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"biginteger")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"float"))," ",(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"decimal"))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Other generic types"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"json"))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Special types unique to Strapi"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"media")),(0,l.kt)("li",null,(0,l.kt)("a",{parentName:"td",href:"#relations"},(0,l.kt)("inlineCode",{parentName:"a"},"relation"))),(0,l.kt)("li",null,(0,l.kt)("a",{parentName:"td",href:"#custom-fields"},(0,l.kt)("inlineCode",{parentName:"a"},"customField"))),(0,l.kt)("li",null,(0,l.kt)("a",{parentName:"td",href:"#components"},(0,l.kt)("inlineCode",{parentName:"a"},"component"))),(0,l.kt)("li",null,(0,l.kt)("a",{parentName:"td",href:"#dynamic-zones"},(0,l.kt)("inlineCode",{parentName:"a"},"dynamiczone")))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Internationalization (i18n)-related types",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("em",{parentName:"td"},"Can only be used if the ",(0,l.kt)("a",{parentName:"em",href:"/aberabook/dev-docs/plugins/i18n"},"i18n plugin")," is installed")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"locale")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"localizations"))))))),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Never name a custom attribute ",(0,l.kt)("inlineCode",{parentName:"p"},"locale")," because it could interfere with, and break, the ",(0,l.kt)("a",{parentName:"p",href:"/dev-docs/plugins/i18n"},"i18n")," feature.")),(0,l.kt)("h4",{id:"validations"},"Validations"),(0,l.kt)("p",null,"Basic validations can be applied to attributes using the following parameters:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"required")),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"If ",(0,l.kt)("inlineCode",{parentName:"td"},"true"),", adds a required validator for this property"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"max")),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"Checks if the value is greater than or equal to the given maximum"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"min")),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"Checks if the value is less than or equal to the given minimum"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"minLength")),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"Minimum number of characters for a field input value"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"maxLength")),(0,l.kt)("td",{parentName:"tr",align:null},"Integer"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum number of characters for a field input value"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"private")),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"If ",(0,l.kt)("inlineCode",{parentName:"td"},"true"),", the attribute will be removed from the server response.",(0,l.kt)("br",null),(0,l.kt)("br",null),"\ud83d\udca1 This is useful to hide sensitive data."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"configurable")),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"If ",(0,l.kt)("inlineCode",{parentName:"td"},"false"),", the attribute isn't configurable from the Content-type Builder plugin."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"true"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/restaurant/schema.json"',title:'"./src/api/[api-name]/content-types/restaurant/schema.json"'},'\n{\n  // ...\n  "attributes": {\n    "title": {\n      "type": "string",\n      "minLength": 3,\n      "maxLength": 99,\n      "unique": true\n    },\n    "description": {\n      "default": "My description",\n      "type": "text",\n      "required": true\n    },\n    "slug": {\n      "type": "uid",\n      "targetField": "title"\n    }\n    // ...\n  }\n}\n')),(0,l.kt)("h4",{id:"database-validations-and-settings"},"Database validations and settings"),(0,l.kt)("admonition",{title:"\ud83d\udea7 This API is considered experimental.",type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"These settings should be reserved to an advanced usage, as they might break some features. There are no plans to make these settings stable.")),(0,l.kt)("p",null,"Database validations and settings are custom options passed directly onto the ",(0,l.kt)("inlineCode",{parentName:"p"},"tableBuilder")," Knex.js function during schema migrations. Database validations allow for an advanced degree of control for setting custom column settings. The following options are set in a ",(0,l.kt)("inlineCode",{parentName:"p"},"column: {}")," object per attribute:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"name")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Changes the name of the column in the database"),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"defaultTo")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Sets the database ",(0,l.kt)("inlineCode",{parentName:"td"},"defaultTo"),", typically used with ",(0,l.kt)("inlineCode",{parentName:"td"},"notNullable")),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"notNullable")),(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Sets the database ",(0,l.kt)("inlineCode",{parentName:"td"},"notNullable"),", ensures that columns cannot be null"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"unsigned")),(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Only applies to number columns, removes the ability to go negative but doubles maximum length"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"unique")),(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Enforces database level unique, caution when using with draft & publish feature"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"type")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Changes the database type, if ",(0,l.kt)("inlineCode",{parentName:"td"},"type")," has arguments, you should pass them in ",(0,l.kt)("inlineCode",{parentName:"td"},"args")),(0,l.kt)("td",{parentName:"tr",align:null},"-")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"args")),(0,l.kt)("td",{parentName:"tr",align:null},"array"),(0,l.kt)("td",{parentName:"tr",align:null},"Arguments passed into the Knex.js function that changes things like ",(0,l.kt)("inlineCode",{parentName:"td"},"type")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"[]"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/restaurant/schema.json"',title:'"./src/api/[api-name]/content-types/restaurant/schema.json"'},'\n{\n  // ...\n  "attributes": {\n    "title": {\n      "type": "string",\n      "minLength": 3,\n      "maxLength": 99,\n      "unique": true,\n      "column": {\n        "unique": true // enforce database unique also\n      }\n    },\n    "description": {\n      "default": "My description",\n      "type": "text",\n      "required": true,\n      "column": {\n        "defaultTo": "My description", // set database level default\n        "notNullable": true // enforce required at database level, even for drafts\n      }\n    },\n    "rating": {\n      "type": "decimal",\n      "default": 0,\n      "column": {\n        "defaultTo": 0,\n        "type": "decimal", // using the native decimal type but allowing for custom precision\n        "args": [\n          6,1 // using custom precision and scale\n        ]\n      }\n    }\n    // ...\n  }\n}\n')),(0,l.kt)("h4",{id:"uid-type"},(0,l.kt)("inlineCode",{parentName:"h4"},"uid")," type"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"uid")," type is used to automatically prefill the field value in the admin panel with a unique identifier (UID) (e.g. slugs for articles) based on 2 optional parameters:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"targetField")," (string): If used, the value of the field defined as a target is used to auto-generate the UID."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"options")," (string): If used, the UID is generated based on a set of options passed to ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/sindresorhus/slugify"},"the underlying ",(0,l.kt)("inlineCode",{parentName:"a"},"uid")," generator"),". The resulting ",(0,l.kt)("inlineCode",{parentName:"li"},"uid")," must match the following regular expression pattern: ",(0,l.kt)("inlineCode",{parentName:"li"},"/^[A-Za-z0-9-_.~]*$"),".")),(0,l.kt)("h4",{id:"relations"},"Relations"),(0,l.kt)("p",null,"Relations link content-types together. Relations are explicitly defined in the ",(0,l.kt)("a",{parentName:"p",href:"#model-attributes"},"attributes"),"  of a model with ",(0,l.kt)("inlineCode",{parentName:"p"},"type: 'relation'"),"  and accept the following additional parameters:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"relation")),(0,l.kt)("td",{parentName:"tr",align:null},"The type of relation among these values:",(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"oneToOne")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"oneToMany")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"manyToOne")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"manyToMany"))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"target")),(0,l.kt)("td",{parentName:"tr",align:null},"Accepts a string value as the name of the target content-type")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"mappedBy")," and ",(0,l.kt)("inlineCode",{parentName:"td"},"inversedBy"),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("em",{parentName:"td"},"Optional")),(0,l.kt)("td",{parentName:"tr",align:null},"In bidirectional relations, the owning side declares the ",(0,l.kt)("inlineCode",{parentName:"td"},"inversedBy")," key while the inversed side declares the ",(0,l.kt)("inlineCode",{parentName:"td"},"mappedBy")," key")))),(0,l.kt)(m,{mdxType:"Tabs"},(0,l.kt)(u,{value:"one-to-one",label:"One-to-one",mdxType:"TabItem"},(0,l.kt)("p",null,"One-to-One relationships are useful when one entry can be linked to only one other entry."),(0,l.kt)("p",null,"They can be unidirectional or bidirectional. In unidirectional relationships, only one of the models can be queried with its linked item."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Unidirectional use case example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"A blog article belongs to a category.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Querying an article can retrieve its category,")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"but querying a category won't retrieve the owned article."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/article/schema.json"',title:'"./src/api/[api-name]/content-types/article/schema.json"'},"\n  // \u2026\n  attributes: {\n    category: {\n      type: 'relation',\n      relation: 'oneToOne',\n      target: 'category',\n    },\n  },\n  // \u2026\n"))))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Bidirectional use case example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"A blog article belongs to a category.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Querying an article can retrieve its category,")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"and querying a category also retrieves its owned article."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/article/schema.json"',title:'"./src/api/[api-name]/content-types/article/schema.json"'},"\n  // \u2026\n  attributes: {\n    category: {\n      type: 'relation',\n      relation: 'oneToOne',\n      target: 'category',\n      inversedBy: 'article',\n    },\n  },\n  // \u2026\n\n")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/category/schema.json"',title:'"./src/api/[api-name]/content-types/category/schema.json"'},"\n  // \u2026\n  attributes: {\n    article: {\n      type: 'relation',\n      relation: 'oneToOne',\n      target: 'article',\n      mappedBy: 'category',\n    },\n  },\n  // \u2026\n\n")))))),(0,l.kt)(u,{value:"one-to-many",label:"One-to-Many",mdxType:"TabItem"},(0,l.kt)("p",null,"One-to-Many relationships are useful when:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"an entry from a content-type A is linked to many entries of another content-type B,"),(0,l.kt)("li",{parentName:"ul"},"while an entry from content-type B is linked to only one entry of content-type A.")),(0,l.kt)("p",null,"One-to-many relationships are always bidirectional, and are usually defined with the corresponding Many-to-One relationship:"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example:"),"A person can own many plants, but a plant is owned by only one person.",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/plant/schema.json"',title:'"./src/api/[api-name]/content-types/plant/schema.json"'},"\n  // \u2026\n  attributes: {\n    owner: {\n      type: 'relation',\n      relation: 'manyToOne',\n      target: 'api::person.person',\n      inversedBy: 'plants',\n    },\n  },\n  // \u2026\n\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/person/models/schema.json"',title:'"./src/api/person/models/schema.json"'},"\n  // \u2026\n  attributes: {\n    plants: {\n      type: 'relation',\n      relation: 'oneToMany',\n      target: 'api::plant.plant',\n      mappedBy: 'owner',\n    },\n  },\n  // \u2026\n")))),(0,l.kt)(u,{value:"many-to-one",label:"Many-to-One",mdxType:"TabItem"},(0,l.kt)("p",null,"Many-to-One relationships are useful to link many entries to one entry."),(0,l.kt)("p",null,"They can be unidirectional or bidirectional. In unidirectional relationships, only one of the models can be queried with its linked item."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Unidirectional use case example:"),(0,l.kt)("p",null,"  A book can be written by many authors."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/book/schema.json"',title:'"./src/api/[api-name]/content-types/book/schema.json"'},"\n  // \u2026\n  attributes: {\n    author: {\n      type: 'relation',\n      relation: 'manyToOne',\n      target: 'author',\n    },\n  },\n  // \u2026\n\n"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Bidirectional use case example:"),(0,l.kt)("p",null,"  An article belongs to only one category but a category has many articles."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/article/schema.json"',title:'"./src/api/[api-name]/content-types/article/schema.json"'},"\n  // \u2026\n  attributes: {\n    author: {\n      type: 'relation',\n      relation: 'manyToOne',\n      target: 'category',\n      inversedBy: 'article',\n    },\n  },\n  // \u2026\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/category/schema.json"',title:'"./src/api/[api-name]/content-types/category/schema.json"'},"\n  // \u2026\n  attributes: {\n    books: {\n      type: 'relation',\n      relation: 'oneToMany',\n      target: 'article',\n      mappedBy: 'category',\n    },\n  },\n  // \u2026\n")))),(0,l.kt)(u,{value:"many-to-many",label:"Many-to-Many",mdxType:"TabItem"},(0,l.kt)("p",null,"Many-to-Many relationships are useful when:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"an entry from content-type A is linked to many entries of content-type B,"),(0,l.kt)("li",{parentName:"ul"},"and an entry from content-type B is also linked to many entries from content-type A.")),(0,l.kt)("p",null,"Many-to-many relationships can be unidirectional or bidirectional. In unidirectional relationships, only one of the models can be queried with its linked item."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Unidirectional use case example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},"  // \u2026\n  attributes: {\n    categories: {\n      type: 'relation',\n      relation: 'manyToMany',\n      target: 'category',\n    },\n  },\n  // \u2026\n"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Bidirectional use case example:"),(0,l.kt)("p",null,"An article can have many tags and a tag can be assigned to many articles."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/src/api/[api-name]/content-types/article/schema.json"',title:'"/src/api/[api-name]/content-types/article/schema.json"'},"\n  // \u2026\n  attributes: {\n    tags: {\n      type: 'relation',\n      relation: 'manyToMany',\n      target: 'tag',\n      inversedBy: 'articles',\n    },\n  },\n  // \u2026\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/tag/schema.json"',title:'"./src/api/[api-name]/content-types/tag/schema.json"'},"\n  // \u2026\n  attributes: {\n    articles: {\n      type: 'relation',\n      relation: 'manyToMany',\n      target: 'article',\n      mappedBy: 'tag',\n    },\n  },\n  // \u2026\n"))))),(0,l.kt)("h4",{id:"custom-fields"},"Custom fields"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/aberabook/dev-docs/custom-fields"},"Custom fields")," extend Strapi\u2019s capabilities by adding new types of fields to content-types. Custom fields are explicitly defined in the ",(0,l.kt)("a",{parentName:"p",href:"#model-attributes"},"attributes")," of a model with ",(0,l.kt)("inlineCode",{parentName:"p"},"type: customField"),".\nCustom fields' attributes also accept:"),(0,l.kt)("p",null,"Custom fields' attributes also show the following specificities:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"a ",(0,l.kt)("inlineCode",{parentName:"li"},"customField")," attribute whose value acts as a unique identifier to indicate which registered custom field should be used. Its value follows:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"either the ",(0,l.kt)("inlineCode",{parentName:"li"},"plugin::plugin-name.field-name")," format if a plugin created the custom field "),(0,l.kt)("li",{parentName:"ul"},"or the ",(0,l.kt)("inlineCode",{parentName:"li"},"global::field-name")," format for a custom field specific to the current Strapi application"))),(0,l.kt)("li",{parentName:"ul"},"and additional parameters depending on what has been defined when registering the custom field (see ",(0,l.kt)("a",{parentName:"li",href:"/aberabook/dev-docs/custom-fields"},"custom fields documentation"),").")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[apiName]/[content-type-name]/content-types/schema.json"',title:'"./src/api/[apiName]/[content-type-name]/content-types/schema.json"'},'\n{\n  // \u2026\n  "attributes": {\n    "attributeName": { // attributeName would be replaced by the actual attribute name\n      "type": "customField",\n      "customField": "plugin::color-picker.color",\n      "options": {\n        "format": "hex"\n      }\n    }\n  }\n  // \u2026\n}\n')),(0,l.kt)("h4",{id:"components-1"},"Components"),(0,l.kt)("p",null,"Component fields create a relation between a content-type and a component structure. Components are explicitly defined in the ",(0,l.kt)("a",{parentName:"p",href:"#model-attributes"},"attributes")," of a model with ",(0,l.kt)("inlineCode",{parentName:"p"},"type: 'component'")," and accept the following additional parameters:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"repeatable")),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Could be ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," or ",(0,l.kt)("inlineCode",{parentName:"td"},"false")," depending on whether the component is repeatable or not")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"component")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Define the corresponding component, following this format:",(0,l.kt)("br",null),(0,l.kt)("inlineCode",{parentName:"td"},"<category>.<componentName>"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[apiName]/restaurant/content-types/schema.json"',title:'"./src/api/[apiName]/restaurant/content-types/schema.json"'},'\n{\n  "attributes": {\n    "openinghours": {\n      "type": "component",\n      "repeatable": true,\n      "component": "restaurant.openinghours"\n    }\n  }\n}\n')),(0,l.kt)("h4",{id:"dynamic-zones"},"Dynamic zones"),(0,l.kt)("p",null,"Dynamic zones create a flexible space in which to compose content, based on a mixed list of ",(0,l.kt)("a",{parentName:"p",href:"#components-2"},"components"),"."),(0,l.kt)("p",null,"Dynamic zones are explicitly defined in the ",(0,l.kt)("a",{parentName:"p",href:"#model-attributes"},"attributes"),"  of a model with ",(0,l.kt)("inlineCode",{parentName:"p"},"type: 'dynamiczone'"),". They also accept a ",(0,l.kt)("inlineCode",{parentName:"p"},"components")," array, where each component should be named following this format: ",(0,l.kt)("inlineCode",{parentName:"p"},"<category>.<componentName>"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/article/schema.json"',title:'"./src/api/[api-name]/content-types/article/schema.json"'},'\n{\n  "attributes": {\n    "body": {\n      "type": "dynamiczone",\n      "components": ["article.slider", "article.content"]\n    }\n  }\n}\n')),(0,l.kt)("h3",{id:"model-options"},"Model options"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"options")," key is used to define specific behaviors and accepts the following parameter:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"privateAttributes")),(0,l.kt)("td",{parentName:"tr",align:null},"Array of strings"),(0,l.kt)("td",{parentName:"tr",align:null},"Allows treating a set of attributes as private, even if they're not actually defined as attributes in the model. It could be used to remove them from API responses timestamps. ",(0,l.kt)("br",null),(0,l.kt)("br",null)," The ",(0,l.kt)("inlineCode",{parentName:"td"},"privateAttributes")," defined in the model are merged with the ",(0,l.kt)("inlineCode",{parentName:"td"},"privateAttributes")," defined in the global Strapi configuration.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"draftAndPublish")),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"Enables the draft and publish feature. ",(0,l.kt)("br",null),(0,l.kt)("br",null)," Default value: ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," (",(0,l.kt)("inlineCode",{parentName:"td"},"false")," if the content-type is created from the interactive CLI).")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="./src/api/[api-name]/content-types/restaurant/schema.json"',title:'"./src/api/[api-name]/content-types/restaurant/schema.json"'},'\n{\n  "options": {\n    "privateAttributes": ["id", "createdAt"],\n    "draftAndPublish": true\n  }\n}\n')),(0,l.kt)("h2",{id:"lifecycle-hooks"},"Lifecycle hooks"),(0,l.kt)("p",null,"Lifecycle hooks are functions that get triggered when Strapi queries are called. They are triggered automatically when managing content through the administration panel or when developing custom code using ",(0,l.kt)("inlineCode",{parentName:"p"},"queries"),"\xb7"),(0,l.kt)("p",null,"Lifecycle hooks can be customized declaratively or programmatically."),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Lifecycles hooks are not triggered when using directly the ",(0,l.kt)("a",{parentName:"p",href:"https://knexjs.org/"},"knex")," library instead of Strapi functions.")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"Please refer to the ",(0,l.kt)("a",{parentName:"p",href:"/dev-docs/error-handling#services-and-models-lifecycles"},"error handling")," documentation to learn how to throw errors from lifecycle hooks.")),(0,l.kt)("h3",{id:"available-lifecycle-events"},"Available lifecycle events"),(0,l.kt)("p",null,"The following lifecycle events are available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeCreate")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeCreateMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterCreate")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterCreateMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeUpdate")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeUpdateMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterUpdate")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterUpdateMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeDelete")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeDeleteMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterDelete")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterDeleteMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeCount")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterCount")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeFindOne")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterFindOne")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"beforeFindMany")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"afterFindMany"))),(0,l.kt)("h3",{id:"hook-event-object"},"Hook ",(0,l.kt)("inlineCode",{parentName:"h3"},"event")," object"),(0,l.kt)("p",null,"Lifecycle hooks are functions that take an ",(0,l.kt)("inlineCode",{parentName:"p"},"event")," parameter, an object with the following keys:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Key"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"action")),(0,l.kt)("td",{parentName:"tr",align:null},"String"),(0,l.kt)("td",{parentName:"tr",align:null},"Lifecycle event that has been triggered (see ",(0,l.kt)("a",{parentName:"td",href:"#available-lifecycle-events"},"list"),")")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"model")),(0,l.kt)("td",{parentName:"tr",align:null},"Array of strings (uid)"),(0,l.kt)("td",{parentName:"tr",align:null},"An array of uids of the content-types whose events will be listened to.",(0,l.kt)("br",null),"If this argument is not supplied, events are listened on all content-types.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"params")),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:null},"Accepts the following parameters:",(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"data")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"select")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"where")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"orderBy")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"limit")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"offset")),(0,l.kt)("li",null,(0,l.kt)("inlineCode",{parentName:"td"},"populate"))))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"result")),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("em",{parentName:"td"},"Optional, only available with ",(0,l.kt)("inlineCode",{parentName:"em"},"afterXXX")," events"),(0,l.kt)("br",null),(0,l.kt)("br",null),"Contains the result of the action.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"state")),(0,l.kt)("td",{parentName:"tr",align:null},"Object"),(0,l.kt)("td",{parentName:"tr",align:null},"Query state, can be used to share state between ",(0,l.kt)("inlineCode",{parentName:"td"},"beforeXXX")," and ",(0,l.kt)("inlineCode",{parentName:"td"},"afterXXX")," events of a query.")))),(0,l.kt)("h3",{id:"declarative-and-programmatic-usage"},"Declarative and programmatic usage"),(0,l.kt)("p",null,"To configure a content-type lifecycle hook, create a ",(0,l.kt)("inlineCode",{parentName:"p"},"lifecycles.js")," file in the ",(0,l.kt)("inlineCode",{parentName:"p"},"./src/api/[api-name]/content-types/[content-type-name]/")," folder."),(0,l.kt)("p",null,"Each event listener is called sequentially. They can be synchronous or asynchronous."),(0,l.kt)("h4",{id:"declarative-usage"},"Declarative usage"),(0,l.kt)(m,{groupdId:"js-ts",mdxType:"Tabs"},(0,l.kt)(u,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./src/api/[api-name]/content-types/[content-type-name]/lifecycles.js"',title:'"./src/api/[api-name]/content-types/[content-type-name]/lifecycles.js"'},"\nmodule.exports = {\n  beforeCreate(event) {\n    const { data, where, select, populate } = event.params;\n\n    // let's do a 20% discount everytime\n    event.params.data.price = event.params.data.price * 0.8;\n  },\n\n  afterCreate(event) {\n    const { result, params } = event;\n\n    // do something to the result;\n  },\n};\n"))),(0,l.kt)(u,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./src/api/[api-name]/content-types/[content-type-name]/lifecycles.ts"',title:'"./src/api/[api-name]/content-types/[content-type-name]/lifecycles.ts"'},"\nexport default {\n  beforeCreate(event) {\n    const { data, where, select, populate } = event.params;\n\n    // let's do a 20% discount everytime\n    event.params.data.price = event.params.data.price * 0.8;\n  },\n\n  afterCreate(event) {\n    const { result, params } = event;\n\n    // do something to the result;\n  },\n};\n")))),(0,l.kt)("h4",{id:"programmatic-usage"},"Programmatic usage"),(0,l.kt)("p",null,"Using the database layer API, it's also possible to register a subscriber and listen to events programmatically:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="./src/index.js"',title:'"./src/index.js"'},"module.exports = {\n  async bootstrap({ strapi }) {\n  // registering a subscriber\n    strapi.db.lifecycles.subscribe({\n      models: [], // optional;\n\n      beforeCreate(event) {\n        const { data, where, select, populate } = event.params;\n\n        event.state = 'doStuffAfterWards';\n      },\n\n      afterCreate(event) {\n        if (event.state === 'doStuffAfterWards') {\n        }\n\n        const { result, params } = event;\n\n        // do something to the result\n      },\n    });\n\n    // generic subscribe for generic handling\n    strapi.db.lifecycles.subscribe((event) => {\n      if (event.action === 'beforeCreate') {\n        // do something\n      }\n    });\n  }\n}\n")))}k.isMDXComponent=!0}}]);